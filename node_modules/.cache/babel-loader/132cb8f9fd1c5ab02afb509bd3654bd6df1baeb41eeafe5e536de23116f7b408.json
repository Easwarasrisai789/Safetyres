{"ast":null,"code":"var _jsxFileName = \"C:\\\\emer_responce\\\\emer_responce\\\\src\\\\pages\\\\Reports.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { db, authReady } from '../firebase';\nimport { collection, onSnapshot, orderBy, query, updateDoc, doc } from 'firebase/firestore';\nimport AdminNavbar from '../components/AdminNavbar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Reports() {\n  _s();\n  const [reports, setReports] = useState([]);\n  useEffect(() => {\n    let unsub = null;\n    let active = true;\n    authReady.then(() => {\n      if (!active) return;\n      const q = query(collection(db, 'reports'), orderBy('createdAt', 'desc'));\n      unsub = onSnapshot(q, snap => {\n        setReports(snap.docs.map(d => ({\n          id: d.id,\n          ...d.data()\n        })));\n      });\n    });\n    return () => {\n      active = false;\n      if (unsub) unsub();\n    };\n  }, []);\n  const markResolved = async id => {\n    await updateDoc(doc(db, 'reports', id), {\n      status: 'resolved'\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      minHeight: '100vh',\n      marginLeft: 220\n    },\n    children: [/*#__PURE__*/_jsxDEV(AdminNavbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: 20\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Reports\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 9\n      }, this), reports.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No reports submitted.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n        style: {\n          width: '100%',\n          borderCollapse: 'collapse',\n          border: '1px solid #ddd',\n          background: '#fff'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            style: {\n              background: '#f1f3f5'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              style: th,\n              children: \"Created\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 37,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: th,\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 38,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: th,\n              children: \"Messages\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 39,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: th,\n              children: \"Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 40,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: th,\n              children: \"Action\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 41,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 36,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: reports.map(r => {\n            var _r$createdAt;\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                style: td,\n                children: (_r$createdAt = r.createdAt) !== null && _r$createdAt !== void 0 && _r$createdAt.seconds ? new Date(r.createdAt.seconds * 1000).toLocaleString() : '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 47,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: td,\n                children: r.email || '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 48,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: td,\n                children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                  style: {\n                    margin: 0,\n                    paddingLeft: 16\n                  },\n                  children: (r.messages || []).map((m, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: [m.role, \":\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 52,\n                      columnNumber: 37\n                    }, this), \" \", m.text]\n                  }, i, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 52,\n                    columnNumber: 25\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 50,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 49,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: td,\n                children: r.status || 'open'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 56,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: td,\n                children: r.status !== 'resolved' && /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => markResolved(r.id),\n                  style: {\n                    padding: '6px 10px',\n                    border: 'none',\n                    borderRadius: 6,\n                    background: '#1f7a8c',\n                    color: '#fff'\n                  },\n                  children: \"Mark Resolved\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 59,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 57,\n                columnNumber: 19\n              }, this)]\n            }, r.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 46,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 5\n  }, this);\n}\n_s(Reports, \"eifepoxx2Z0yKkh6cCXYE5fQb1c=\");\n_c = Reports;\nconst th = {\n  padding: 10,\n  border: '1px solid #ddd',\n  textAlign: 'left'\n};\nconst td = {\n  padding: 8,\n  border: '1px solid #ddd',\n  verticalAlign: 'top'\n};\nvar _c;\n$RefreshReg$(_c, \"Reports\");","map":{"version":3,"names":["React","useEffect","useState","db","authReady","collection","onSnapshot","orderBy","query","updateDoc","doc","AdminNavbar","jsxDEV","_jsxDEV","Reports","_s","reports","setReports","unsub","active","then","q","snap","docs","map","d","id","data","markResolved","status","style","display","flexDirection","minHeight","marginLeft","children","fileName","_jsxFileName","lineNumber","columnNumber","padding","length","width","borderCollapse","border","background","th","r","_r$createdAt","td","createdAt","seconds","Date","toLocaleString","email","margin","paddingLeft","messages","m","i","role","text","onClick","borderRadius","color","_c","textAlign","verticalAlign","$RefreshReg$"],"sources":["C:/emer_responce/emer_responce/src/pages/Reports.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { db, authReady } from '../firebase';\r\nimport { collection, onSnapshot, orderBy, query, updateDoc, doc } from 'firebase/firestore';\r\nimport AdminNavbar from '../components/AdminNavbar';\r\n\r\nexport default function Reports() {\r\n  const [reports, setReports] = useState([]);\r\n\r\n  useEffect(() => {\r\n    let unsub = null;\r\n    let active = true;\r\n    authReady.then(() => {\r\n      if (!active) return;\r\n      const q = query(collection(db, 'reports'), orderBy('createdAt', 'desc'));\r\n      unsub = onSnapshot(q, (snap) => {\r\n        setReports(snap.docs.map((d) => ({ id: d.id, ...d.data() })));\r\n      });\r\n    });\r\n    return () => { active = false; if (unsub) unsub(); };\r\n  }, []);\r\n\r\n  const markResolved = async (id) => {\r\n    await updateDoc(doc(db, 'reports', id), { status: 'resolved' });\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: 'flex', flexDirection: 'column', minHeight: '100vh', marginLeft: 220 }}>\r\n      <AdminNavbar />\r\n      <div style={{ padding: 20 }}>\r\n        <h2>Reports</h2>\r\n        {reports.length === 0 ? (\r\n          <p>No reports submitted.</p>\r\n        ) : (\r\n          <table style={{ width: '100%', borderCollapse: 'collapse', border: '1px solid #ddd', background: '#fff' }}>\r\n            <thead>\r\n              <tr style={{ background: '#f1f3f5' }}>\r\n                <th style={th}>Created</th>\r\n                <th style={th}>Email</th>\r\n                <th style={th}>Messages</th>\r\n                <th style={th}>Status</th>\r\n                <th style={th}>Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {reports.map((r) => (\r\n                <tr key={r.id}>\r\n                  <td style={td}>{r.createdAt?.seconds ? new Date(r.createdAt.seconds * 1000).toLocaleString() : '-'}</td>\r\n                  <td style={td}>{r.email || '-'}</td>\r\n                  <td style={td}>\r\n                    <ul style={{ margin: 0, paddingLeft: 16 }}>\r\n                      {(r.messages || []).map((m, i) => (\r\n                        <li key={i}><strong>{m.role}:</strong> {m.text}</li>\r\n                      ))}\r\n                    </ul>\r\n                  </td>\r\n                  <td style={td}>{r.status || 'open'}</td>\r\n                  <td style={td}>\r\n                    {r.status !== 'resolved' && (\r\n                      <button onClick={() => markResolved(r.id)} style={{ padding: '6px 10px', border: 'none', borderRadius: 6, background: '#1f7a8c', color: '#fff' }}>Mark Resolved</button>\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst th = { padding: 10, border: '1px solid #ddd', textAlign: 'left' };\r\nconst td = { padding: 8, border: '1px solid #ddd', verticalAlign: 'top' };\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}