{"ast":null,"code":"var _jsxFileName = \"C:\\\\emer_responce\\\\emer_responce\\\\src\\\\pages\\\\AssignedVehicles.jsx\",\n  _s = $RefreshSig$();\n// src/pages/AssignedVehicles.jsx\nimport React, { useState, useEffect, useMemo } from \"react\";\nimport { db, authReady } from \"../firebase\";\nimport { collection, onSnapshot, doc, updateDoc, serverTimestamp } from \"firebase/firestore\";\nimport AdminNavbar from \"../components/AdminNavbar\";\n// live driver list via onSnapshot\n\n// Table cell styles\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst thStyle = {\n  padding: \"10px\",\n  textAlign: \"left\",\n  border: \"1px solid #ddd\"\n};\nconst tdStyle = {\n  padding: \"8px\",\n  border: \"1px solid #ddd\",\n  backgroundColor: \"white\"\n};\n\n// ✅ Default vehicles pool\nconst defaultVehicles = {\n  ambulance: Array.from({\n    length: 10\n  }, (_, i) => ({\n    id: `Ambulance-${i + 1}`,\n    available: true\n  })),\n  fireengine: Array.from({\n    length: 10\n  }, (_, i) => ({\n    id: `FireEngine-${i + 1}`,\n    available: true\n  })),\n  policevan: Array.from({\n    length: 10\n  }, (_, i) => ({\n    id: `PoliceVan-${i + 1}`,\n    available: true\n  }))\n};\nexport default function AssignedVehicles() {\n  _s();\n  const [requests, setRequests] = useState([]);\n  const [vehicles, setVehicles] = useState(defaultVehicles);\n  const [drivers, setDrivers] = useState([]);\n\n  // ✅ Fetch accepted/assigned requests in realtime\n  useEffect(() => {\n    let unsubscribe = null;\n    let active = true;\n    authReady.then(() => {\n      if (!active) return;\n      unsubscribe = onSnapshot(collection(db, \"emergencyRequests\"), snapshot => {\n        const reqs = snapshot.docs.map(d => ({\n          id: d.id,\n          ...d.data()\n        }));\n        setRequests(reqs.filter(r => r.status === \"Accepted\" || r.status === \"assigned\"));\n      });\n    });\n    return () => {\n      active = false;\n      if (unsubscribe) unsubscribe();\n    };\n  }, []);\n\n  // Load drivers for assignment select (realtime)\n  useEffect(() => {\n    let unsubscribe = null;\n    let active = true;\n    authReady.then(() => {\n      if (!active) return;\n      unsubscribe = onSnapshot(collection(db, 'drivers'), snap => {\n        const list = snap.docs.map(d => ({\n          id: d.id,\n          ...d.data()\n        }));\n        setDrivers(list);\n      });\n    });\n    return () => {\n      active = false;\n      if (unsubscribe) unsubscribe();\n    };\n  }, []);\n\n  // ✅ Assign a vehicle\n  const assignVehicle = async request => {\n    var _request$vehicleType;\n    const type = (_request$vehicleType = request.vehicleType) === null || _request$vehicleType === void 0 ? void 0 : _request$vehicleType.toLowerCase();\n    const inferredType = type || request.assignedVehicleType || \"ambulance\";\n    if (!inferredType || !vehicles[inferredType]) {\n      alert(\"Invalid vehicle type requested\");\n      return;\n    }\n\n    // Find first available vehicle of this type\n    const availableVehicle = vehicles[inferredType].find(v => v.available);\n    if (!availableVehicle) {\n      alert(`No ${inferredType} available right now`);\n      return;\n    }\n\n    // Mark this vehicle as unavailable in local state\n    setVehicles(prev => ({\n      ...prev,\n      [inferredType]: prev[inferredType].map(v => v.id === availableVehicle.id ? {\n        ...v,\n        available: false\n      } : v)\n    }));\n\n    // Update Firestore with assignment\n    const requestRef = doc(db, \"emergencyRequests\", request.id);\n    await updateDoc(requestRef, {\n      assignedVehicle: availableVehicle.id,\n      assignedUser: request.name || null,\n      assignedVehicleType: inferredType,\n      vehicleAssignedAt: serverTimestamp(),\n      status: \"assigned\"\n    });\n\n    // ✅ Release vehicle after 10 minutes (locally; Firestore remains historical)\n    setTimeout(() => {\n      setVehicles(prev => ({\n        ...prev,\n        [inferredType]: prev[inferredType].map(v => v.id === availableVehicle.id ? {\n          ...v,\n          available: true\n        } : v)\n      }));\n    }, 10 * 60 * 1000);\n  };\n  const assignDriver = async (requestId, driverId) => {\n    var _requests$find;\n    const driver = drivers.find(d => d.id === driverId);\n    if (!driver) return;\n    const reqRef = doc(db, 'emergencyRequests', requestId);\n    await updateDoc(reqRef, {\n      assignedDriverId: driverId,\n      assignedDriverEmail: driver.email || null\n    });\n    const drvRef = doc(db, 'drivers', driverId);\n    await updateDoc(drvRef, {\n      assignedVehicle: ((_requests$find = requests.find(r => r.id === requestId)) === null || _requests$find === void 0 ? void 0 : _requests$find.assignedVehicle) || null,\n      available: false\n    });\n  };\n\n  // Vehicle type is fixed by the user's original request; no manual changes here\n\n  // Compute remaining time for assigned vehicles (client-side countdown)\n  const now = Date.now();\n  const withCountdown = useMemo(() => {\n    const inferType = r => {\n      const text = `${r.vehicle || ''} ${r.situation || ''}`.toLowerCase();\n      if (r.assignedVehicleType || r.vehicleType) return (r.assignedVehicleType || r.vehicleType).toLowerCase();\n      if (text.includes('fire')) return 'fireengine';\n      if (text.includes('police') || text.includes('crime')) return 'policevan';\n      return 'ambulance';\n    };\n    return requests.map(r => {\n      var _r$vehicleAssignedAt, _r$timestamp;\n      // prefer vehicleAssignedAt, fallback to request timestamp\n      const assignedAtMs = (_r$vehicleAssignedAt = r.vehicleAssignedAt) !== null && _r$vehicleAssignedAt !== void 0 && _r$vehicleAssignedAt.seconds ? r.vehicleAssignedAt.seconds * 1000 : r.vehicleAssignedAt ? Date.parse(r.vehicleAssignedAt) : (_r$timestamp = r.timestamp) !== null && _r$timestamp !== void 0 && _r$timestamp.seconds ? r.timestamp.seconds * 1000 : r.timestamp ? Date.parse(r.timestamp) : null;\n      let remainingMs = null;\n      let completionAt = null;\n      if (assignedAtMs) {\n        const end = assignedAtMs + 10 * 60 * 1000;\n        remainingMs = Math.max(0, end - now);\n        completionAt = new Date(end);\n      }\n      const completionStr = completionAt ? completionAt.toLocaleString() : null;\n      const resolvedVehicleType = inferType(r);\n      const assignedAtStr = assignedAtMs ? new Date(assignedAtMs).toLocaleString() : null;\n      return {\n        ...r,\n        remainingMs,\n        completionStr,\n        resolvedVehicleType,\n        assignedAtStr\n      };\n    });\n  }, [requests, now]);\n\n  // Ticker to refresh countdowns\n  useEffect(() => {\n    const id = setInterval(() => {\n      // force rerender by touching state\n      setRequests(prev => [...prev]);\n    }, 1000);\n    return () => clearInterval(id);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6\",\n    style: {\n      marginLeft: 220\n    },\n    children: [/*#__PURE__*/_jsxDEV(AdminNavbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-2xl font-bold mb-4\",\n      children: \"Assigned Vehicles\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this), requests.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No accepted requests.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n      style: {\n        width: '100%',\n        borderCollapse: 'collapse',\n        border: '1px solid #ddd',\n        background: '#fff'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          style: {\n            background: '#f1f3f5'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            style: thStyle,\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: thStyle,\n            children: \"Vehicle Type\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: thStyle,\n            children: \"Assigned Vehicle\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: thStyle,\n            children: \"Driver\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: thStyle,\n            children: \"Destination\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: thStyle,\n            children: \"Releases In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: thStyle,\n            children: \"Assigned At\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: thStyle,\n            children: \"Completion Time\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: thStyle,\n            children: \"Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: thStyle,\n            children: \"Action\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: withCountdown.map(req => {\n          var _drivers$find, _drivers$find2;\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              style: tdStyle,\n              children: req.name || '-'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: tdStyle,\n              children: req.resolvedVehicleType || 'N/A'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: tdStyle,\n              children: req.assignedVehicle || /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: '#888'\n                },\n                children: \"Not Assigned\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 61\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: tdStyle,\n              children: req.assignedDriverId ? ((_drivers$find = drivers.find(d => d.id === req.assignedDriverId)) === null || _drivers$find === void 0 ? void 0 : _drivers$find.name) || ((_drivers$find2 = drivers.find(d => d.id === req.assignedDriverId)) === null || _drivers$find2 === void 0 ? void 0 : _drivers$find2.email) || 'Assigned' : (() => {\n                const requiredType = (req.resolvedVehicleType || '').toLowerCase();\n                const eligible = drivers.filter(d => d.available !== false && (d.vehicleType || '').toLowerCase() === requiredType);\n                return eligible.length > 0 ? /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: \"\",\n                  onChange: e => assignDriver(req.id, e.target.value),\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    disabled: true,\n                    children: \"Select driver\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 223,\n                    columnNumber: 27\n                  }, this), eligible.map(d => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: d.id,\n                    children: d.name || d.email || d.id\n                  }, d.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 225,\n                    columnNumber: 29\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: '#888'\n                  },\n                  children: [\"No available drivers for \", requiredType || 'type']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 25\n                }, this);\n              })()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: tdStyle,\n              children: req.latitude && req.longitude ? /*#__PURE__*/_jsxDEV(\"a\", {\n                href: `https://www.google.com/maps?q=${req.latitude},${req.longitude}`,\n                target: \"_blank\",\n                rel: \"noreferrer\",\n                children: \"View Map\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 21\n              }, this) : '-'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: tdStyle,\n              children: req.remainingMs !== null ? `${Math.floor(req.remainingMs / 60000)}m ${Math.floor(req.remainingMs % 60000 / 1000)}s` : '-'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: tdStyle,\n              children: req.assignedAtStr || '-'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: tdStyle,\n              children: req.completionStr || '-'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: tdStyle,\n              children: req.status\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: tdStyle,\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `px-4 py-2 rounded-lg ${req.assignedVehicle ? 'bg-gray-400' : 'bg-blue-600 hover:bg-blue-700'} text-white`,\n                onClick: () => assignVehicle(req),\n                disabled: !!req.assignedVehicle,\n                style: {\n                  padding: '6px 10px',\n                  borderRadius: 6,\n                  border: 'none',\n                  cursor: req.assignedVehicle ? 'default' : 'pointer',\n                  background: req.assignedVehicle ? '#9e9e9e' : '#1e88e5',\n                  color: '#fff'\n                },\n                children: req.assignedVehicle ? 'Assigned' : 'Assign'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 17\n            }, this)]\n          }, req.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 183,\n    columnNumber: 5\n  }, this);\n}\n_s(AssignedVehicles, \"JUxv8JAldAZnm/axsacaKW+yXGk=\");\n_c = AssignedVehicles;\nvar _c;\n$RefreshReg$(_c, \"AssignedVehicles\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","db","authReady","collection","onSnapshot","doc","updateDoc","serverTimestamp","AdminNavbar","jsxDEV","_jsxDEV","thStyle","padding","textAlign","border","tdStyle","backgroundColor","defaultVehicles","ambulance","Array","from","length","_","i","id","available","fireengine","policevan","AssignedVehicles","_s","requests","setRequests","vehicles","setVehicles","drivers","setDrivers","unsubscribe","active","then","snapshot","reqs","docs","map","d","data","filter","r","status","snap","list","assignVehicle","request","_request$vehicleType","type","vehicleType","toLowerCase","inferredType","assignedVehicleType","alert","availableVehicle","find","v","prev","requestRef","assignedVehicle","assignedUser","name","vehicleAssignedAt","setTimeout","assignDriver","requestId","driverId","_requests$find","driver","reqRef","assignedDriverId","assignedDriverEmail","email","drvRef","now","Date","withCountdown","inferType","text","vehicle","situation","includes","_r$vehicleAssignedAt","_r$timestamp","assignedAtMs","seconds","parse","timestamp","remainingMs","completionAt","end","Math","max","completionStr","toLocaleString","resolvedVehicleType","assignedAtStr","setInterval","clearInterval","className","style","marginLeft","children","fileName","_jsxFileName","lineNumber","columnNumber","width","borderCollapse","background","req","_drivers$find","_drivers$find2","color","requiredType","eligible","value","onChange","e","target","disabled","latitude","longitude","href","rel","floor","onClick","borderRadius","cursor","_c","$RefreshReg$"],"sources":["C:/emer_responce/emer_responce/src/pages/AssignedVehicles.jsx"],"sourcesContent":["// src/pages/AssignedVehicles.jsx\nimport React, { useState, useEffect, useMemo } from \"react\";\nimport { db, authReady } from \"../firebase\";\nimport {\n  collection,\n  onSnapshot,\n  doc,\n  updateDoc,\n  serverTimestamp,\n} from \"firebase/firestore\";\nimport AdminNavbar from \"../components/AdminNavbar\";\n// live driver list via onSnapshot\n\n// Table cell styles\nconst thStyle = {\n  padding: \"10px\",\n  textAlign: \"left\",\n  border: \"1px solid #ddd\",\n};\n\nconst tdStyle = {\n  padding: \"8px\",\n  border: \"1px solid #ddd\",\n  backgroundColor: \"white\",\n};\n\n// ✅ Default vehicles pool\nconst defaultVehicles = {\n  ambulance: Array.from({ length: 10 }, (_, i) => ({\n    id: `Ambulance-${i + 1}`,\n    available: true,\n  })),\n  fireengine: Array.from({ length: 10 }, (_, i) => ({\n    id: `FireEngine-${i + 1}`,\n    available: true,\n  })),\n  policevan: Array.from({ length: 10 }, (_, i) => ({\n    id: `PoliceVan-${i + 1}`,\n    available: true,\n  })),\n};\n\nexport default function AssignedVehicles() {\n  const [requests, setRequests] = useState([]);\n  const [vehicles, setVehicles] = useState(defaultVehicles);\n  const [drivers, setDrivers] = useState([]);\n\n  // ✅ Fetch accepted/assigned requests in realtime\n  useEffect(() => {\n    let unsubscribe = null;\n    let active = true;\n    authReady.then(() => {\n      if (!active) return;\n      unsubscribe = onSnapshot(collection(db, \"emergencyRequests\"), (snapshot) => {\n        const reqs = snapshot.docs.map((d) => ({ id: d.id, ...d.data() }));\n        setRequests(\n          reqs.filter((r) =>\n            (r.status === \"Accepted\" || r.status === \"assigned\")\n          )\n        );\n      });\n    });\n    return () => { active = false; if (unsubscribe) unsubscribe(); };\n  }, []);\n\n  // Load drivers for assignment select (realtime)\n  useEffect(() => {\n    let unsubscribe = null;\n    let active = true;\n    authReady.then(() => {\n      if (!active) return;\n      unsubscribe = onSnapshot(collection(db, 'drivers'), (snap) => {\n        const list = snap.docs.map((d) => ({ id: d.id, ...d.data() }));\n        setDrivers(list);\n      });\n    });\n    return () => { active = false; if (unsubscribe) unsubscribe(); };\n  }, []);\n\n  // ✅ Assign a vehicle\n  const assignVehicle = async (request) => {\n    const type = request.vehicleType?.toLowerCase();\n    const inferredType = type || request.assignedVehicleType || \"ambulance\";\n    if (!inferredType || !vehicles[inferredType]) {\n      alert(\"Invalid vehicle type requested\");\n      return;\n    }\n\n    // Find first available vehicle of this type\n    const availableVehicle = vehicles[inferredType].find((v) => v.available);\n    if (!availableVehicle) {\n      alert(`No ${inferredType} available right now`);\n      return;\n    }\n\n    // Mark this vehicle as unavailable in local state\n    setVehicles((prev) => ({\n      ...prev,\n      [inferredType]: prev[inferredType].map((v) =>\n        v.id === availableVehicle.id ? { ...v, available: false } : v\n      ),\n    }));\n\n    // Update Firestore with assignment\n    const requestRef = doc(db, \"emergencyRequests\", request.id);\n    await updateDoc(requestRef, {\n      assignedVehicle: availableVehicle.id,\n      assignedUser: request.name || null,\n      assignedVehicleType: inferredType,\n      vehicleAssignedAt: serverTimestamp(),\n      status: \"assigned\",\n    });\n\n    // ✅ Release vehicle after 10 minutes (locally; Firestore remains historical)\n    setTimeout(() => {\n      setVehicles((prev) => ({\n        ...prev,\n        [inferredType]: prev[inferredType].map((v) =>\n          v.id === availableVehicle.id ? { ...v, available: true } : v\n        ),\n      }));\n    }, 10 * 60 * 1000);\n  };\n\n  const assignDriver = async (requestId, driverId) => {\n    const driver = drivers.find((d) => d.id === driverId);\n    if (!driver) return;\n    const reqRef = doc(db, 'emergencyRequests', requestId);\n    await updateDoc(reqRef, {\n      assignedDriverId: driverId,\n      assignedDriverEmail: driver.email || null,\n    });\n    const drvRef = doc(db, 'drivers', driverId);\n    await updateDoc(drvRef, {\n      assignedVehicle: requests.find((r) => r.id === requestId)?.assignedVehicle || null,\n      available: false,\n    });\n  };\n\n  // Vehicle type is fixed by the user's original request; no manual changes here\n\n  // Compute remaining time for assigned vehicles (client-side countdown)\n  const now = Date.now();\n  const withCountdown = useMemo(() => {\n    const inferType = (r) => {\n      const text = `${r.vehicle || ''} ${r.situation || ''}`.toLowerCase();\n      if ((r.assignedVehicleType || r.vehicleType)) return (r.assignedVehicleType || r.vehicleType).toLowerCase();\n      if (text.includes('fire')) return 'fireengine';\n      if (text.includes('police') || text.includes('crime')) return 'policevan';\n      return 'ambulance';\n    };\n    return requests.map((r) => {\n      // prefer vehicleAssignedAt, fallback to request timestamp\n      const assignedAtMs = r.vehicleAssignedAt?.seconds\n        ? r.vehicleAssignedAt.seconds * 1000\n        : (r.vehicleAssignedAt ? Date.parse(r.vehicleAssignedAt) : (\n            r.timestamp?.seconds ? r.timestamp.seconds * 1000 : (r.timestamp ? Date.parse(r.timestamp) : null)\n          ));\n      let remainingMs = null;\n      let completionAt = null;\n      if (assignedAtMs) {\n        const end = assignedAtMs + 10 * 60 * 1000;\n        remainingMs = Math.max(0, end - now);\n        completionAt = new Date(end);\n      }\n      const completionStr = completionAt ? completionAt.toLocaleString() : null;\n      const resolvedVehicleType = inferType(r);\n      const assignedAtStr = assignedAtMs ? new Date(assignedAtMs).toLocaleString() : null;\n      return { ...r, remainingMs, completionStr, resolvedVehicleType, assignedAtStr };\n    });\n  }, [requests, now]);\n\n  // Ticker to refresh countdowns\n  useEffect(() => {\n    const id = setInterval(() => {\n      // force rerender by touching state\n      setRequests((prev) => [...prev]);\n    }, 1000);\n    return () => clearInterval(id);\n  }, []);\n\n  return (\n    <div className=\"p-6\" style={{ marginLeft: 220 }}>\n      <AdminNavbar />\n      <h1 className=\"text-2xl font-bold mb-4\">Assigned Vehicles</h1>\n\n      {requests.length === 0 ? (\n        <p>No accepted requests.</p>\n      ) : (\n        <table style={{ width: '100%', borderCollapse: 'collapse', border: '1px solid #ddd', background: '#fff' }}>\n          <thead>\n            <tr style={{ background: '#f1f3f5' }}>\n              <th style={thStyle}>Name</th>\n              <th style={thStyle}>Vehicle Type</th>\n              <th style={thStyle}>Assigned Vehicle</th>\n              <th style={thStyle}>Driver</th>\n              <th style={thStyle}>Destination</th>\n              <th style={thStyle}>Releases In</th>\n              <th style={thStyle}>Assigned At</th>\n              <th style={thStyle}>Completion Time</th>\n              <th style={thStyle}>Status</th>\n              <th style={thStyle}>Action</th>\n            </tr>\n          </thead>\n          <tbody>\n            {withCountdown.map((req) => (\n              <tr key={req.id}>\n                <td style={tdStyle}>{req.name || '-'}</td>\n                <td style={tdStyle}>{req.resolvedVehicleType || 'N/A'}</td>\n                <td style={tdStyle}>{req.assignedVehicle || <span style={{ color: '#888' }}>Not Assigned</span>}</td>\n                <td style={tdStyle}>\n                  {req.assignedDriverId ? (\n                    drivers.find((d) => d.id === req.assignedDriverId)?.name || drivers.find((d) => d.id === req.assignedDriverId)?.email || 'Assigned'\n                  ) : (\n                    (() => {\n                      const requiredType = (req.resolvedVehicleType || '').toLowerCase();\n                      const eligible = drivers.filter((d) => (d.available !== false) && ((d.vehicleType || '').toLowerCase() === requiredType));\n                      return eligible.length > 0 ? (\n                        <select\n                          value=\"\"\n                          onChange={(e) => assignDriver(req.id, e.target.value)}\n                        >\n                          <option value=\"\" disabled>Select driver</option>\n                          {eligible.map((d) => (\n                            <option key={d.id} value={d.id}>{d.name || d.email || d.id}</option>\n                          ))}\n                        </select>\n                      ) : (\n                        <span style={{ color: '#888' }}>No available drivers for {requiredType || 'type'}</span>\n                      );\n                    })()\n                  )}\n                </td>\n                <td style={tdStyle}>\n                  {req.latitude && req.longitude ? (\n                    <a href={`https://www.google.com/maps?q=${req.latitude},${req.longitude}`} target=\"_blank\" rel=\"noreferrer\">View Map</a>\n                  ) : '-'}\n                </td>\n                <td style={tdStyle}>\n                  {req.remainingMs !== null ? `${Math.floor(req.remainingMs / 60000)}m ${Math.floor((req.remainingMs % 60000)/1000)}s` : '-'}\n                </td>\n                <td style={tdStyle}>{req.assignedAtStr || '-'}</td>\n                <td style={tdStyle}>{req.completionStr || '-'}</td>\n                <td style={tdStyle}>{req.status}</td>\n                <td style={tdStyle}>\n                  <button\n                    className={`px-4 py-2 rounded-lg ${req.assignedVehicle ? 'bg-gray-400' : 'bg-blue-600 hover:bg-blue-700'} text-white`}\n                    onClick={() => assignVehicle(req)}\n                    disabled={!!req.assignedVehicle}\n                    style={{ padding: '6px 10px', borderRadius: 6, border: 'none', cursor: req.assignedVehicle ? 'default' : 'pointer', background: req.assignedVehicle ? '#9e9e9e' : '#1e88e5', color: '#fff' }}\n                  >\n                    {req.assignedVehicle ? 'Assigned' : 'Assign'}\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}