{"ast":null,"code":"var _jsxFileName = \"C:\\\\emer_responce\\\\emer_responce\\\\src\\\\pages\\\\DriverPortal.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { onAuthStateChanged, signOut } from 'firebase/auth';\nimport { useNavigate } from 'react-router-dom';\nimport { auth, db } from '../firebase';\nimport { collection, query, where, onSnapshot, doc, updateDoc } from 'firebase/firestore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function DriverPortal() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [assignment, setAssignment] = useState(null);\n  const [driver, setDriver] = useState(null);\n  const [driverDocId, setDriverDocId] = useState(null);\n  const [activeTab, setActiveTab] = useState('assignment'); // 'assignment' | 'profile'\n  const [profileForm, setProfileForm] = useState({\n    name: '',\n    phone: '',\n    vehicleType: ''\n  });\n  const [notification, setNotification] = useState(null);\n  const lastAssignedRef = useRef(null);\n  const navigate = useNavigate();\n  const doLogout = async () => {\n    await signOut(auth);\n    navigate('/driver-login');\n  };\n  useEffect(() => {\n    const unsubAuth = onAuthStateChanged(auth, u => setUser(u));\n    return () => unsubAuth();\n  }, []);\n  useEffect(() => {\n    if (!user) return;\n    // Find driver doc by uid or email\n    const q = query(collection(db, 'drivers'), where('email', '==', user.email || ''));\n    const unsub = onSnapshot(q, snap => {\n      const d = snap.docs[0];\n      const data = d === null || d === void 0 ? void 0 : d.data();\n      setDriver(data || null);\n      setDriverDocId((d === null || d === void 0 ? void 0 : d.id) || null);\n      if (!data) {\n        setAssignment(null);\n        return;\n      }\n      setProfileForm({\n        name: data.name || '',\n        phone: data.phone || '',\n        vehicleType: data.vehicleType || ''\n      });\n      // Watch the request assigned to this driver via assignedVehicle\n      const rq = query(collection(db, 'emergencyRequests'), where('assignedVehicle', '==', data.assignedVehicle || '__none__'));\n      const unsubReq = onSnapshot(rq, rs => {\n        const next = rs.docs[0] ? {\n          id: rs.docs[0].id,\n          ...rs.docs[0].data()\n        } : null;\n        // Show notification on new assignment\n        if (next !== null && next !== void 0 && next.assignedVehicle && lastAssignedRef.current !== next.assignedVehicle) {\n          setNotification({\n            title: 'New Assignment',\n            message: `Vehicle ${next.assignedVehicle} assigned.`,\n            type: 'info'\n          });\n          lastAssignedRef.current = next.assignedVehicle;\n        }\n        setAssignment(next);\n      });\n      return () => unsubReq();\n    });\n    return () => unsub();\n  }, [user]);\n  const shareLocation = () => {\n    if (!navigator.geolocation || !user) return;\n    navigator.geolocation.getCurrentPosition(async pos => {\n      const {\n        latitude,\n        longitude\n      } = pos.coords;\n      const q = query(collection(db, 'drivers'), where('email', '==', user.email || ''));\n      // Fetch once via onSnapshot callback pattern\n      const unsub = onSnapshot(q, async snap => {\n        const driverDoc = snap.docs[0];\n        if (driverDoc) {\n          await updateDoc(doc(db, 'drivers', driverDoc.id), {\n            location: {\n              latitude,\n              longitude\n            },\n            lastSharedAt: new Date().toISOString()\n          });\n          setNotification({\n            title: 'Location Shared',\n            message: 'Your current location was sent.',\n            type: 'success'\n          });\n        }\n        unsub();\n      });\n    });\n  };\n  const saveProfile = async () => {\n    if (!driverDocId) return;\n    await updateDoc(doc(db, 'drivers', driverDocId), {\n      name: profileForm.name,\n      phone: profileForm.phone,\n      vehicleType: profileForm.vehicleType\n    });\n    setNotification({\n      title: 'Profile Updated',\n      message: 'Your profile was saved.',\n      type: 'success'\n    });\n  };\n  const assignmentMapUrl = useMemo(() => {\n    if (!(assignment !== null && assignment !== void 0 && assignment.latitude) || !(assignment !== null && assignment !== void 0 && assignment.longitude)) return null;\n    return `https://www.google.com/maps?q=${assignment.latitude},${assignment.longitude}&hl=es;z=14&output=embed`;\n  }, [assignment]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n      style: styles.sidebar,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          marginTop: 0\n        },\n        children: \"Driver\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        style: styles.menu,\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            ...styles.menuItem,\n            ...(activeTab === 'assignment' ? styles.menuItemActive : {})\n          },\n          onClick: () => setActiveTab('assignment'),\n          children: \"My Assignment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            ...styles.menuItem,\n            ...(activeTab === 'profile' ? styles.menuItemActive : {})\n          },\n          onClick: () => setActiveTab('profile'),\n          children: \"Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: styles.logout,\n        onClick: doLogout,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      style: styles.main,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          marginTop: 0\n        },\n        children: \"Driver Portal\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), !user && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Please log in.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 19\n      }, this), user && activeTab === 'assignment' && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.card,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"User:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 16\n          }, this), \" \", user.email]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }, this), !assignment ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No vehicle assigned yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gridTemplateColumns: '1fr 1fr',\n            gap: 12\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Assigned Vehicle:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 22\n              }, this), \" \", assignment.assignedVehicle]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Type:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 22\n              }, this), \" \", assignment.assignedVehicleType || '-']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Status:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 22\n              }, this), \" \", assignment.status]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Destination:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 22\n              }, this), \" \", assignment.latitude, \", \", assignment.longitude]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 19\n            }, this), assignmentMapUrl && /*#__PURE__*/_jsxDEV(\"iframe\", {\n              title: \"destination\",\n              width: \"100%\",\n              height: \"180\",\n              style: {\n                border: 0\n              },\n              loading: \"lazy\",\n              src: assignmentMapUrl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 12\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.button,\n            onClick: shareLocation,\n            children: \"Share Current Location\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this), user && activeTab === 'profile' && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.card,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            marginTop: 0\n          },\n          children: \"My Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gridTemplateColumns: '1fr 1fr 1fr',\n            gap: 12\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              style: styles.input,\n              value: profileForm.name,\n              onChange: e => setProfileForm({\n                ...profileForm,\n                name: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Phone\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              style: styles.input,\n              value: profileForm.phone,\n              onChange: e => setProfileForm({\n                ...profileForm,\n                phone: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Vehicle Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              style: styles.input,\n              value: profileForm.vehicleType,\n              onChange: e => setProfileForm({\n                ...profileForm,\n                vehicleType: e.target.value\n              }),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"ambulance\",\n                children: \"Ambulance\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"fireengine\",\n                children: \"Fire Engine\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"policevan\",\n                children: \"Police Van\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 12\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.button,\n            onClick: saveProfile,\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }, this), notification && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'fixed',\n          right: 16,\n          bottom: 16,\n          background: '#2d3436',\n          color: '#fff',\n          padding: '10px 12px',\n          borderRadius: 8,\n          boxShadow: '0 6px 20px rgba(0,0,0,0.25)'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontWeight: 'bold'\n          },\n          children: notification.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: notification.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            marginTop: 6,\n            background: '#636e72',\n            color: '#fff',\n            border: 'none',\n            borderRadius: 6,\n            padding: '4px 8px',\n            cursor: 'pointer'\n          },\n          onClick: () => setNotification(null),\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n}\n_s(DriverPortal, \"4diWYNqPaVMhidZdS7/TWuuPCSk=\", false, function () {\n  return [useNavigate];\n});\n_c = DriverPortal;\nconst styles = {\n  container: {\n    display: 'flex',\n    minHeight: '100vh',\n    background: '#f5f6fa'\n  },\n  sidebar: {\n    position: 'fixed',\n    left: 0,\n    top: 0,\n    bottom: 0,\n    width: 220,\n    background: 'linear-gradient(to bottom, #2c3e50, #2f3b4a)',\n    color: '#fff',\n    padding: 16,\n    boxSizing: 'border-box'\n  },\n  main: {\n    marginLeft: 220,\n    padding: 20,\n    width: '100%',\n    boxSizing: 'border-box'\n  },\n  menu: {\n    listStyle: 'none',\n    padding: 0,\n    margin: 0\n  },\n  menuItem: {\n    padding: '8px 0',\n    opacity: 0.9,\n    cursor: 'pointer'\n  },\n  menuItemActive: {\n    fontWeight: 'bold',\n    opacity: 1\n  },\n  card: {\n    background: '#fff',\n    border: '1px solid #eaeaea',\n    borderRadius: 10,\n    padding: 16,\n    boxShadow: '0 4px 10px rgba(0,0,0,0.05)'\n  },\n  button: {\n    padding: '10px 12px',\n    borderRadius: 8,\n    border: 'none',\n    background: '#1f7a8c',\n    color: '#fff',\n    cursor: 'pointer',\n    fontWeight: 'bold'\n  },\n  input: {\n    width: '100%',\n    padding: '10px 12px',\n    borderRadius: 8,\n    border: '1px solid #dcdde1'\n  },\n  logout: {\n    marginTop: 'auto',\n    width: '100%',\n    padding: '10px 12px',\n    borderRadius: 8,\n    border: 'none',\n    background: '#e63946',\n    color: '#fff',\n    cursor: 'pointer',\n    fontWeight: 'bold'\n  }\n};\nvar _c;\n$RefreshReg$(_c, \"DriverPortal\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","onAuthStateChanged","signOut","useNavigate","auth","db","collection","query","where","onSnapshot","doc","updateDoc","jsxDEV","_jsxDEV","DriverPortal","_s","user","setUser","assignment","setAssignment","driver","setDriver","driverDocId","setDriverDocId","activeTab","setActiveTab","profileForm","setProfileForm","name","phone","vehicleType","notification","setNotification","lastAssignedRef","navigate","doLogout","unsubAuth","u","q","email","unsub","snap","d","docs","data","id","rq","assignedVehicle","unsubReq","rs","next","current","title","message","type","shareLocation","navigator","geolocation","getCurrentPosition","pos","latitude","longitude","coords","driverDoc","location","lastSharedAt","Date","toISOString","saveProfile","assignmentMapUrl","style","styles","container","children","sidebar","marginTop","fileName","_jsxFileName","lineNumber","columnNumber","menu","menuItem","menuItemActive","onClick","logout","main","card","display","gridTemplateColumns","gap","assignedVehicleType","status","width","height","border","loading","src","button","input","value","onChange","e","target","position","right","bottom","background","color","padding","borderRadius","boxShadow","fontWeight","cursor","_c","minHeight","left","top","boxSizing","marginLeft","listStyle","margin","opacity","$RefreshReg$"],"sources":["C:/emer_responce/emer_responce/src/pages/DriverPortal.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react';\r\nimport { onAuthStateChanged, signOut } from 'firebase/auth';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { auth, db } from '../firebase';\r\nimport { collection, query, where, onSnapshot, doc, updateDoc } from 'firebase/firestore';\r\n\r\nexport default function DriverPortal() {\r\n  const [user, setUser] = useState(null);\r\n  const [assignment, setAssignment] = useState(null);\r\n  const [driver, setDriver] = useState(null);\r\n  const [driverDocId, setDriverDocId] = useState(null);\r\n  const [activeTab, setActiveTab] = useState('assignment'); // 'assignment' | 'profile'\r\n  const [profileForm, setProfileForm] = useState({ name: '', phone: '', vehicleType: '' });\r\n  const [notification, setNotification] = useState(null);\r\n  const lastAssignedRef = useRef(null);\r\n  const navigate = useNavigate();\r\n\r\n  const doLogout = async () => {\r\n    await signOut(auth);\r\n    navigate('/driver-login');\r\n  };\r\n\r\n  useEffect(() => {\r\n    const unsubAuth = onAuthStateChanged(auth, (u) => setUser(u));\r\n    return () => unsubAuth();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!user) return;\r\n    // Find driver doc by uid or email\r\n    const q = query(collection(db, 'drivers'), where('email', '==', user.email || ''));\r\n    const unsub = onSnapshot(q, (snap) => {\r\n      const d = snap.docs[0];\r\n      const data = d?.data();\r\n      setDriver(data || null);\r\n      setDriverDocId(d?.id || null);\r\n      if (!data) { setAssignment(null); return; }\r\n      setProfileForm({\r\n        name: data.name || '',\r\n        phone: data.phone || '',\r\n        vehicleType: data.vehicleType || '',\r\n      });\r\n      // Watch the request assigned to this driver via assignedVehicle\r\n      const rq = query(\r\n        collection(db, 'emergencyRequests'),\r\n        where('assignedVehicle', '==', data.assignedVehicle || '__none__')\r\n      );\r\n      const unsubReq = onSnapshot(rq, (rs) => {\r\n        const next = rs.docs[0] ? { id: rs.docs[0].id, ...rs.docs[0].data() } : null;\r\n        // Show notification on new assignment\r\n        if (next?.assignedVehicle && lastAssignedRef.current !== next.assignedVehicle) {\r\n          setNotification({\r\n            title: 'New Assignment',\r\n            message: `Vehicle ${next.assignedVehicle} assigned.`,\r\n            type: 'info'\r\n          });\r\n          lastAssignedRef.current = next.assignedVehicle;\r\n        }\r\n        setAssignment(next);\r\n      });\r\n      return () => unsubReq();\r\n    });\r\n    return () => unsub();\r\n  }, [user]);\r\n\r\n  const shareLocation = () => {\r\n    if (!navigator.geolocation || !user) return;\r\n    navigator.geolocation.getCurrentPosition(async (pos) => {\r\n      const { latitude, longitude } = pos.coords;\r\n      const q = query(collection(db, 'drivers'), where('email', '==', user.email || ''));\r\n      // Fetch once via onSnapshot callback pattern\r\n      const unsub = onSnapshot(q, async (snap) => {\r\n        const driverDoc = snap.docs[0];\r\n        if (driverDoc) {\r\n          await updateDoc(doc(db, 'drivers', driverDoc.id), {\r\n            location: { latitude, longitude },\r\n            lastSharedAt: new Date().toISOString(),\r\n          });\r\n          setNotification({ title: 'Location Shared', message: 'Your current location was sent.', type: 'success' });\r\n        }\r\n        unsub();\r\n      });\r\n    });\r\n  };\r\n\r\n  const saveProfile = async () => {\r\n    if (!driverDocId) return;\r\n    await updateDoc(doc(db, 'drivers', driverDocId), {\r\n      name: profileForm.name,\r\n      phone: profileForm.phone,\r\n      vehicleType: profileForm.vehicleType,\r\n    });\r\n    setNotification({ title: 'Profile Updated', message: 'Your profile was saved.', type: 'success' });\r\n  };\r\n\r\n  const assignmentMapUrl = useMemo(() => {\r\n    if (!assignment?.latitude || !assignment?.longitude) return null;\r\n    return `https://www.google.com/maps?q=${assignment.latitude},${assignment.longitude}&hl=es;z=14&output=embed`;\r\n  }, [assignment]);\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <aside style={styles.sidebar}>\r\n        <h3 style={{ marginTop: 0 }}>Driver</h3>\r\n        <ul style={styles.menu}>\r\n          <li style={{ ...styles.menuItem, ...(activeTab === 'assignment' ? styles.menuItemActive : {}) }} onClick={() => setActiveTab('assignment')}>My Assignment</li>\r\n          <li style={{ ...styles.menuItem, ...(activeTab === 'profile' ? styles.menuItemActive : {}) }} onClick={() => setActiveTab('profile')}>Profile</li>\r\n        </ul>\r\n        <button style={styles.logout} onClick={doLogout}>Logout</button>\r\n      </aside>\r\n      <main style={styles.main}>\r\n        <h2 style={{ marginTop: 0 }}>Driver Portal</h2>\r\n        {!user && <p>Please log in.</p>}\r\n        {user && activeTab === 'assignment' && (\r\n          <div style={styles.card}>\r\n            <p><strong>User:</strong> {user.email}</p>\r\n            {!assignment ? (\r\n              <p>No vehicle assigned yet.</p>\r\n            ) : (\r\n              <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 12 }}>\r\n                <div>\r\n                  <p><strong>Assigned Vehicle:</strong> {assignment.assignedVehicle}</p>\r\n                  <p><strong>Type:</strong> {assignment.assignedVehicleType || '-'}</p>\r\n                  <p><strong>Status:</strong> {assignment.status}</p>\r\n                </div>\r\n                <div>\r\n                  <p><strong>Destination:</strong> {assignment.latitude}, {assignment.longitude}</p>\r\n                  {assignmentMapUrl && (\r\n                    <iframe title=\"destination\" width=\"100%\" height=\"180\" style={{ border: 0 }} loading=\"lazy\" src={assignmentMapUrl}></iframe>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n            <div style={{ marginTop: 12 }}>\r\n              <button style={styles.button} onClick={shareLocation}>Share Current Location</button>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {user && activeTab === 'profile' && (\r\n          <div style={styles.card}>\r\n            <h3 style={{ marginTop: 0 }}>My Profile</h3>\r\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: 12 }}>\r\n              <div>\r\n                <label>Name</label>\r\n                <input style={styles.input} value={profileForm.name} onChange={(e) => setProfileForm({ ...profileForm, name: e.target.value })} />\r\n              </div>\r\n              <div>\r\n                <label>Phone</label>\r\n                <input style={styles.input} value={profileForm.phone} onChange={(e) => setProfileForm({ ...profileForm, phone: e.target.value })} />\r\n              </div>\r\n              <div>\r\n                <label>Vehicle Type</label>\r\n                <select style={styles.input} value={profileForm.vehicleType} onChange={(e) => setProfileForm({ ...profileForm, vehicleType: e.target.value })}>\r\n                  <option value=\"ambulance\">Ambulance</option>\r\n                  <option value=\"fireengine\">Fire Engine</option>\r\n                  <option value=\"policevan\">Police Van</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div style={{ marginTop: 12 }}>\r\n              <button style={styles.button} onClick={saveProfile}>Save</button>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {notification && (\r\n          <div style={{ position: 'fixed', right: 16, bottom: 16, background: '#2d3436', color: '#fff', padding: '10px 12px', borderRadius: 8, boxShadow: '0 6px 20px rgba(0,0,0,0.25)' }}>\r\n            <div style={{ fontWeight: 'bold' }}>{notification.title}</div>\r\n            <div>{notification.message}</div>\r\n            <button style={{ marginTop: 6, background: '#636e72', color: '#fff', border: 'none', borderRadius: 6, padding: '4px 8px', cursor: 'pointer' }} onClick={() => setNotification(null)}>Close</button>\r\n          </div>\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst styles = {\r\n  container: { display: 'flex', minHeight: '100vh', background: '#f5f6fa' },\r\n  sidebar: {\r\n    position: 'fixed', left: 0, top: 0, bottom: 0, width: 220,\r\n    background: 'linear-gradient(to bottom, #2c3e50, #2f3b4a)', color: '#fff',\r\n    padding: 16, boxSizing: 'border-box'\r\n  },\r\n  main: { marginLeft: 220, padding: 20, width: '100%', boxSizing: 'border-box' },\r\n  menu: { listStyle: 'none', padding: 0, margin: 0 },\r\n  menuItem: { padding: '8px 0', opacity: 0.9, cursor: 'pointer' },\r\n  menuItemActive: { fontWeight: 'bold', opacity: 1 },\r\n  card: {\r\n    background: '#fff', border: '1px solid #eaeaea', borderRadius: 10,\r\n    padding: 16, boxShadow: '0 4px 10px rgba(0,0,0,0.05)'\r\n  },\r\n  button: {\r\n    padding: '10px 12px', borderRadius: 8, border: 'none', background: '#1f7a8c',\r\n    color: '#fff', cursor: 'pointer', fontWeight: 'bold'\r\n  },\r\n  input: {\r\n    width: '100%',\r\n    padding: '10px 12px',\r\n    borderRadius: 8,\r\n    border: '1px solid #dcdde1'\r\n  },\r\n  logout: {\r\n    marginTop: 'auto',\r\n    width: '100%',\r\n    padding: '10px 12px',\r\n    borderRadius: 8,\r\n    border: 'none',\r\n    background: '#e63946',\r\n    color: '#fff',\r\n    cursor: 'pointer',\r\n    fontWeight: 'bold'\r\n  }\r\n};\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}