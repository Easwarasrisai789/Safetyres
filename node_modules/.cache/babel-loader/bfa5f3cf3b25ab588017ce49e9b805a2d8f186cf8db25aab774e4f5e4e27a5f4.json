{"ast":null,"code":"var _jsxFileName = \"C:\\\\emer_responce\\\\emer_responce\\\\src\\\\pages\\\\AssignedVehicles.jsx\",\n  _s = $RefreshSig$();\n// src/pages/AssignedVehicles.jsx\nimport React, { useState, useEffect, useMemo } from \"react\";\nimport { db, authReady } from \"../firebase\";\nimport { collection, onSnapshot, doc, updateDoc, serverTimestamp } from \"firebase/firestore\";\nimport AdminNavbar from \"../components/AdminNavbar\";\n// live driver list via onSnapshot\n\n// Table cell styles\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst thStyle = {\n  padding: \"10px\",\n  textAlign: \"left\",\n  border: \"1px solid #ddd\"\n};\nconst tdStyle = {\n  padding: \"8px\",\n  border: \"1px solid #ddd\",\n  backgroundColor: \"white\"\n};\n\n// ✅ Default vehicles pool\nconst defaultVehicles = {\n  ambulance: Array.from({\n    length: 10\n  }, (_, i) => ({\n    id: `Ambulance-${i + 1}`,\n    available: true\n  })),\n  fireengine: Array.from({\n    length: 10\n  }, (_, i) => ({\n    id: `FireEngine-${i + 1}`,\n    available: true\n  })),\n  policevan: Array.from({\n    length: 10\n  }, (_, i) => ({\n    id: `PoliceVan-${i + 1}`,\n    available: true\n  }))\n};\nexport default function AssignedVehicles() {\n  _s();\n  const [requests, setRequests] = useState([]);\n  const [vehicles, setVehicles] = useState(defaultVehicles);\n  const [drivers, setDrivers] = useState([]);\n\n  // ✅ Fetch accepted/assigned requests in realtime\n  useEffect(() => {\n    let unsubscribe = null;\n    let active = true;\n    authReady.then(() => {\n      if (!active) return;\n      unsubscribe = onSnapshot(collection(db, \"emergencyRequests\"), snapshot => {\n        const reqs = snapshot.docs.map(d => ({\n          id: d.id,\n          ...d.data()\n        }));\n        setRequests(reqs.filter(r => r.status === \"Accepted\" || r.status === \"assigned\"));\n      });\n    });\n    return () => {\n      active = false;\n      if (unsubscribe) unsubscribe();\n    };\n  }, []);\n\n  // Load drivers for assignment select (realtime)\n  useEffect(() => {\n    let unsubscribe = null;\n    let active = true;\n    authReady.then(() => {\n      if (!active) return;\n      unsubscribe = onSnapshot(collection(db, 'drivers'), snap => {\n        const list = snap.docs.map(d => ({\n          id: d.id,\n          ...d.data()\n        }));\n        setDrivers(list);\n      });\n    });\n    return () => {\n      active = false;\n      if (unsubscribe) unsubscribe();\n    };\n  }, []);\n\n  // ✅ Assign a vehicle\n  const assignVehicle = async request => {\n    var _request$vehicleType;\n    const type = (_request$vehicleType = request.vehicleType) === null || _request$vehicleType === void 0 ? void 0 : _request$vehicleType.toLowerCase();\n    const inferredType = type || request.assignedVehicleType || \"ambulance\";\n    if (!inferredType || !vehicles[inferredType]) {\n      alert(\"Invalid vehicle type requested\");\n      return;\n    }\n\n    // Find first available vehicle of this type\n    const availableVehicle = vehicles[inferredType].find(v => v.available);\n    if (!availableVehicle) {\n      alert(`No ${inferredType} available right now`);\n      return;\n    }\n\n    // Mark this vehicle as unavailable in local state\n    setVehicles(prev => ({\n      ...prev,\n      [inferredType]: prev[inferredType].map(v => v.id === availableVehicle.id ? {\n        ...v,\n        available: false\n      } : v)\n    }));\n\n    // Update Firestore with assignment\n    const requestRef = doc(db, \"emergencyRequests\", request.id);\n    await updateDoc(requestRef, {\n      assignedVehicle: availableVehicle.id,\n      assignedUser: request.name || null,\n      assignedVehicleType: inferredType,\n      vehicleAssignedAt: serverTimestamp(),\n      status: \"assigned\"\n    });\n\n    // ✅ Release vehicle after 10 minutes (locally; Firestore remains historical)\n    setTimeout(() => {\n      setVehicles(prev => ({\n        ...prev,\n        [inferredType]: prev[inferredType].map(v => v.id === availableVehicle.id ? {\n          ...v,\n          available: true\n        } : v)\n      }));\n    }, 10 * 60 * 1000);\n  };\n  const assignDriver = async (requestId, driverId) => {\n    var _requests$find;\n    const driver = drivers.find(d => d.id === driverId);\n    if (!driver) return;\n    const reqRef = doc(db, 'emergencyRequests', requestId);\n    await updateDoc(reqRef, {\n      assignedDriverId: driverId,\n      assignedDriverEmail: driver.email || null\n    });\n    const drvRef = doc(db, 'drivers', driverId);\n    await updateDoc(drvRef, {\n      assignedVehicle: ((_requests$find = requests.find(r => r.id === requestId)) === null || _requests$find === void 0 ? void 0 : _requests$find.assignedVehicle) || null,\n      available: false\n    });\n  };\n\n  // Vehicle type is fixed by the user's original request; no manual changes here\n\n  // Compute remaining time for assigned vehicles (client-side countdown)\n  const now = Date.now();\n  const withCountdown = useMemo(() => {\n    const inferType = r => {\n      const text = `${r.vehicle || ''} ${r.situation || ''}`.toLowerCase();\n      if (r.assignedVehicleType || r.vehicleType) return (r.assignedVehicleType || r.vehicleType).toLowerCase();\n      if (text.includes('fire')) return 'fireengine';\n      if (text.includes('police') || text.includes('crime')) return 'policevan';\n      return 'ambulance';\n    };\n    return requests.map(r => {\n      var _r$vehicleAssignedAt;\n      const assignedAtMs = (_r$vehicleAssignedAt = r.vehicleAssignedAt) !== null && _r$vehicleAssignedAt !== void 0 && _r$vehicleAssignedAt.seconds ? r.vehicleAssignedAt.seconds * 1000 : r.vehicleAssignedAt ? Date.parse(r.vehicleAssignedAt) : null;\n      let remainingMs = null;\n      let completionAt = null;\n      if (assignedAtMs) {\n        const end = assignedAtMs + 10 * 60 * 1000;\n        remainingMs = Math.max(0, end - now);\n        completionAt = new Date(end);\n      }\n      const completionStr = completionAt ? completionAt.toLocaleString() : null;\n      const resolvedVehicleType = inferType(r);\n      return {\n        ...r,\n        remainingMs,\n        completionStr,\n        resolvedVehicleType\n      };\n    });\n  }, [requests, now]);\n\n  // Ticker to refresh countdowns\n  useEffect(() => {\n    const id = setInterval(() => {\n      // force rerender by touching state\n      setRequests(prev => [...prev]);\n    }, 1000);\n    return () => clearInterval(id);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6\",\n    style: {\n      marginLeft: 220\n    },\n    children: [/*#__PURE__*/_jsxDEV(AdminNavbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-2xl font-bold mb-4\",\n      children: \"Assigned Vehicles\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this), requests.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No accepted requests.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n      style: {\n        width: '100%',\n        borderCollapse: 'collapse',\n        border: '1px solid #ddd',\n        background: '#fff'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          style: {\n            background: '#f1f3f5'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            style: thStyle,\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: thStyle,\n            children: \"Vehicle Type\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: thStyle,\n            children: \"Assigned Vehicle\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: thStyle,\n            children: \"Driver\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: thStyle,\n            children: \"Destination\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: thStyle,\n            children: \"Releases In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: thStyle,\n            children: \"Completion Time\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: thStyle,\n            children: \"Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: thStyle,\n            children: \"Action\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: withCountdown.map(req => {\n          var _drivers$find, _drivers$find2;\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              style: tdStyle,\n              children: req.name || '-'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: tdStyle,\n              children: req.resolvedVehicleType || 'N/A'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: tdStyle,\n              children: req.assignedVehicle || /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: '#888'\n                },\n                children: \"Not Assigned\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 61\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: tdStyle,\n              children: req.assignedDriverId ? ((_drivers$find = drivers.find(d => d.id === req.assignedDriverId)) === null || _drivers$find === void 0 ? void 0 : _drivers$find.name) || ((_drivers$find2 = drivers.find(d => d.id === req.assignedDriverId)) === null || _drivers$find2 === void 0 ? void 0 : _drivers$find2.email) || 'Assigned' : (() => {\n                const requiredType = (req.resolvedVehicleType || '').toLowerCase();\n                const eligible = drivers.filter(d => d.available !== false && (d.vehicleType || '').toLowerCase() === requiredType);\n                return eligible.length > 0 ? /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: \"\",\n                  onChange: e => assignDriver(req.id, e.target.value),\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    disabled: true,\n                    children: \"Select driver\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 218,\n                    columnNumber: 27\n                  }, this), eligible.map(d => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: d.id,\n                    children: d.name || d.email || d.id\n                  }, d.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 29\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: '#888'\n                  },\n                  children: [\"No available drivers for \", requiredType || 'type']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 25\n                }, this);\n              })()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: tdStyle,\n              children: req.latitude && req.longitude ? /*#__PURE__*/_jsxDEV(\"a\", {\n                href: `https://www.google.com/maps?q=${req.latitude},${req.longitude}`,\n                target: \"_blank\",\n                rel: \"noreferrer\",\n                children: \"View Map\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 21\n              }, this) : '-'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: tdStyle,\n              children: req.remainingMs !== null ? `${Math.floor(req.remainingMs / 60000)}m ${Math.floor(req.remainingMs % 60000 / 1000)}s` : '-'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: tdStyle,\n              children: req.completionStr || '-'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: tdStyle,\n              children: req.status\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: tdStyle,\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `px-4 py-2 rounded-lg ${req.assignedVehicle ? 'bg-gray-400' : 'bg-blue-600 hover:bg-blue-700'} text-white`,\n                onClick: () => assignVehicle(req),\n                disabled: !!req.assignedVehicle,\n                style: {\n                  padding: '6px 10px',\n                  borderRadius: 6,\n                  border: 'none',\n                  cursor: req.assignedVehicle ? 'default' : 'pointer',\n                  background: req.assignedVehicle ? '#9e9e9e' : '#1e88e5',\n                  color: '#fff'\n                },\n                children: req.assignedVehicle ? 'Assigned' : 'Assign'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 17\n            }, this)]\n          }, req.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 179,\n    columnNumber: 5\n  }, this);\n}\n_s(AssignedVehicles, \"JUxv8JAldAZnm/axsacaKW+yXGk=\");\n_c = AssignedVehicles;\nvar _c;\n$RefreshReg$(_c, \"AssignedVehicles\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","db","authReady","collection","onSnapshot","doc","updateDoc","serverTimestamp","AdminNavbar","jsxDEV","_jsxDEV","thStyle","padding","textAlign","border","tdStyle","backgroundColor","defaultVehicles","ambulance","Array","from","length","_","i","id","available","fireengine","policevan","AssignedVehicles","_s","requests","setRequests","vehicles","setVehicles","drivers","setDrivers","unsubscribe","active","then","snapshot","reqs","docs","map","d","data","filter","r","status","snap","list","assignVehicle","request","_request$vehicleType","type","vehicleType","toLowerCase","inferredType","assignedVehicleType","alert","availableVehicle","find","v","prev","requestRef","assignedVehicle","assignedUser","name","vehicleAssignedAt","setTimeout","assignDriver","requestId","driverId","_requests$find","driver","reqRef","assignedDriverId","assignedDriverEmail","email","drvRef","now","Date","withCountdown","inferType","text","vehicle","situation","includes","_r$vehicleAssignedAt","assignedAtMs","seconds","parse","remainingMs","completionAt","end","Math","max","completionStr","toLocaleString","resolvedVehicleType","setInterval","clearInterval","className","style","marginLeft","children","fileName","_jsxFileName","lineNumber","columnNumber","width","borderCollapse","background","req","_drivers$find","_drivers$find2","color","requiredType","eligible","value","onChange","e","target","disabled","latitude","longitude","href","rel","floor","onClick","borderRadius","cursor","_c","$RefreshReg$"],"sources":["C:/emer_responce/emer_responce/src/pages/AssignedVehicles.jsx"],"sourcesContent":["// src/pages/AssignedVehicles.jsx\r\nimport React, { useState, useEffect, useMemo } from \"react\";\r\nimport { db, authReady } from \"../firebase\";\r\nimport {\r\n  collection,\r\n  onSnapshot,\r\n  doc,\r\n  updateDoc,\r\n  serverTimestamp,\r\n} from \"firebase/firestore\";\r\nimport AdminNavbar from \"../components/AdminNavbar\";\r\n// live driver list via onSnapshot\r\n\r\n// Table cell styles\r\nconst thStyle = {\r\n  padding: \"10px\",\r\n  textAlign: \"left\",\r\n  border: \"1px solid #ddd\",\r\n};\r\n\r\nconst tdStyle = {\r\n  padding: \"8px\",\r\n  border: \"1px solid #ddd\",\r\n  backgroundColor: \"white\",\r\n};\r\n\r\n// ✅ Default vehicles pool\r\nconst defaultVehicles = {\r\n  ambulance: Array.from({ length: 10 }, (_, i) => ({\r\n    id: `Ambulance-${i + 1}`,\r\n    available: true,\r\n  })),\r\n  fireengine: Array.from({ length: 10 }, (_, i) => ({\r\n    id: `FireEngine-${i + 1}`,\r\n    available: true,\r\n  })),\r\n  policevan: Array.from({ length: 10 }, (_, i) => ({\r\n    id: `PoliceVan-${i + 1}`,\r\n    available: true,\r\n  })),\r\n};\r\n\r\nexport default function AssignedVehicles() {\r\n  const [requests, setRequests] = useState([]);\r\n  const [vehicles, setVehicles] = useState(defaultVehicles);\r\n  const [drivers, setDrivers] = useState([]);\r\n\r\n  // ✅ Fetch accepted/assigned requests in realtime\r\n  useEffect(() => {\r\n    let unsubscribe = null;\r\n    let active = true;\r\n    authReady.then(() => {\r\n      if (!active) return;\r\n      unsubscribe = onSnapshot(collection(db, \"emergencyRequests\"), (snapshot) => {\r\n        const reqs = snapshot.docs.map((d) => ({ id: d.id, ...d.data() }));\r\n        setRequests(\r\n          reqs.filter((r) =>\r\n            (r.status === \"Accepted\" || r.status === \"assigned\")\r\n          )\r\n        );\r\n      });\r\n    });\r\n    return () => { active = false; if (unsubscribe) unsubscribe(); };\r\n  }, []);\r\n\r\n  // Load drivers for assignment select (realtime)\r\n  useEffect(() => {\r\n    let unsubscribe = null;\r\n    let active = true;\r\n    authReady.then(() => {\r\n      if (!active) return;\r\n      unsubscribe = onSnapshot(collection(db, 'drivers'), (snap) => {\r\n        const list = snap.docs.map((d) => ({ id: d.id, ...d.data() }));\r\n        setDrivers(list);\r\n      });\r\n    });\r\n    return () => { active = false; if (unsubscribe) unsubscribe(); };\r\n  }, []);\r\n\r\n  // ✅ Assign a vehicle\r\n  const assignVehicle = async (request) => {\r\n    const type = request.vehicleType?.toLowerCase();\r\n    const inferredType = type || request.assignedVehicleType || \"ambulance\";\r\n    if (!inferredType || !vehicles[inferredType]) {\r\n      alert(\"Invalid vehicle type requested\");\r\n      return;\r\n    }\r\n\r\n    // Find first available vehicle of this type\r\n    const availableVehicle = vehicles[inferredType].find((v) => v.available);\r\n    if (!availableVehicle) {\r\n      alert(`No ${inferredType} available right now`);\r\n      return;\r\n    }\r\n\r\n    // Mark this vehicle as unavailable in local state\r\n    setVehicles((prev) => ({\r\n      ...prev,\r\n      [inferredType]: prev[inferredType].map((v) =>\r\n        v.id === availableVehicle.id ? { ...v, available: false } : v\r\n      ),\r\n    }));\r\n\r\n    // Update Firestore with assignment\r\n    const requestRef = doc(db, \"emergencyRequests\", request.id);\r\n    await updateDoc(requestRef, {\r\n      assignedVehicle: availableVehicle.id,\r\n      assignedUser: request.name || null,\r\n      assignedVehicleType: inferredType,\r\n      vehicleAssignedAt: serverTimestamp(),\r\n      status: \"assigned\",\r\n    });\r\n\r\n    // ✅ Release vehicle after 10 minutes (locally; Firestore remains historical)\r\n    setTimeout(() => {\r\n      setVehicles((prev) => ({\r\n        ...prev,\r\n        [inferredType]: prev[inferredType].map((v) =>\r\n          v.id === availableVehicle.id ? { ...v, available: true } : v\r\n        ),\r\n      }));\r\n    }, 10 * 60 * 1000);\r\n  };\r\n\r\n  const assignDriver = async (requestId, driverId) => {\r\n    const driver = drivers.find((d) => d.id === driverId);\r\n    if (!driver) return;\r\n    const reqRef = doc(db, 'emergencyRequests', requestId);\r\n    await updateDoc(reqRef, {\r\n      assignedDriverId: driverId,\r\n      assignedDriverEmail: driver.email || null,\r\n    });\r\n    const drvRef = doc(db, 'drivers', driverId);\r\n    await updateDoc(drvRef, {\r\n      assignedVehicle: requests.find((r) => r.id === requestId)?.assignedVehicle || null,\r\n      available: false,\r\n    });\r\n  };\r\n\r\n  // Vehicle type is fixed by the user's original request; no manual changes here\r\n\r\n  // Compute remaining time for assigned vehicles (client-side countdown)\r\n  const now = Date.now();\r\n  const withCountdown = useMemo(() => {\r\n    const inferType = (r) => {\r\n      const text = `${r.vehicle || ''} ${r.situation || ''}`.toLowerCase();\r\n      if ((r.assignedVehicleType || r.vehicleType)) return (r.assignedVehicleType || r.vehicleType).toLowerCase();\r\n      if (text.includes('fire')) return 'fireengine';\r\n      if (text.includes('police') || text.includes('crime')) return 'policevan';\r\n      return 'ambulance';\r\n    };\r\n    return requests.map((r) => {\r\n      const assignedAtMs = r.vehicleAssignedAt?.seconds\r\n        ? r.vehicleAssignedAt.seconds * 1000\r\n        : (r.vehicleAssignedAt ? Date.parse(r.vehicleAssignedAt) : null);\r\n      let remainingMs = null;\r\n      let completionAt = null;\r\n      if (assignedAtMs) {\r\n        const end = assignedAtMs + 10 * 60 * 1000;\r\n        remainingMs = Math.max(0, end - now);\r\n        completionAt = new Date(end);\r\n      }\r\n      const completionStr = completionAt ? completionAt.toLocaleString() : null;\r\n      const resolvedVehicleType = inferType(r);\r\n      return { ...r, remainingMs, completionStr, resolvedVehicleType };\r\n    });\r\n  }, [requests, now]);\r\n\r\n  // Ticker to refresh countdowns\r\n  useEffect(() => {\r\n    const id = setInterval(() => {\r\n      // force rerender by touching state\r\n      setRequests((prev) => [...prev]);\r\n    }, 1000);\r\n    return () => clearInterval(id);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"p-6\" style={{ marginLeft: 220 }}>\r\n      <AdminNavbar />\r\n      <h1 className=\"text-2xl font-bold mb-4\">Assigned Vehicles</h1>\r\n\r\n      {requests.length === 0 ? (\r\n        <p>No accepted requests.</p>\r\n      ) : (\r\n        <table style={{ width: '100%', borderCollapse: 'collapse', border: '1px solid #ddd', background: '#fff' }}>\r\n          <thead>\r\n            <tr style={{ background: '#f1f3f5' }}>\r\n              <th style={thStyle}>Name</th>\r\n              <th style={thStyle}>Vehicle Type</th>\r\n              <th style={thStyle}>Assigned Vehicle</th>\r\n              <th style={thStyle}>Driver</th>\r\n              <th style={thStyle}>Destination</th>\r\n              <th style={thStyle}>Releases In</th>\r\n              <th style={thStyle}>Completion Time</th>\r\n              <th style={thStyle}>Status</th>\r\n              <th style={thStyle}>Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {withCountdown.map((req) => (\r\n              <tr key={req.id}>\r\n                <td style={tdStyle}>{req.name || '-'}</td>\r\n                <td style={tdStyle}>{req.resolvedVehicleType || 'N/A'}</td>\r\n                <td style={tdStyle}>{req.assignedVehicle || <span style={{ color: '#888' }}>Not Assigned</span>}</td>\r\n                <td style={tdStyle}>\r\n                  {req.assignedDriverId ? (\r\n                    drivers.find((d) => d.id === req.assignedDriverId)?.name || drivers.find((d) => d.id === req.assignedDriverId)?.email || 'Assigned'\r\n                  ) : (\r\n                    (() => {\r\n                      const requiredType = (req.resolvedVehicleType || '').toLowerCase();\r\n                      const eligible = drivers.filter((d) => (d.available !== false) && ((d.vehicleType || '').toLowerCase() === requiredType));\r\n                      return eligible.length > 0 ? (\r\n                        <select\r\n                          value=\"\"\r\n                          onChange={(e) => assignDriver(req.id, e.target.value)}\r\n                        >\r\n                          <option value=\"\" disabled>Select driver</option>\r\n                          {eligible.map((d) => (\r\n                            <option key={d.id} value={d.id}>{d.name || d.email || d.id}</option>\r\n                          ))}\r\n                        </select>\r\n                      ) : (\r\n                        <span style={{ color: '#888' }}>No available drivers for {requiredType || 'type'}</span>\r\n                      );\r\n                    })()\r\n                  )}\r\n                </td>\r\n                <td style={tdStyle}>\r\n                  {req.latitude && req.longitude ? (\r\n                    <a href={`https://www.google.com/maps?q=${req.latitude},${req.longitude}`} target=\"_blank\" rel=\"noreferrer\">View Map</a>\r\n                  ) : '-'}\r\n                </td>\r\n                <td style={tdStyle}>\r\n                  {req.remainingMs !== null ? `${Math.floor(req.remainingMs / 60000)}m ${Math.floor((req.remainingMs % 60000)/1000)}s` : '-'}\r\n                </td>\r\n                <td style={tdStyle}>{req.completionStr || '-'}</td>\r\n                <td style={tdStyle}>{req.status}</td>\r\n                <td style={tdStyle}>\r\n                  <button\r\n                    className={`px-4 py-2 rounded-lg ${req.assignedVehicle ? 'bg-gray-400' : 'bg-blue-600 hover:bg-blue-700'} text-white`}\r\n                    onClick={() => assignVehicle(req)}\r\n                    disabled={!!req.assignedVehicle}\r\n                    style={{ padding: '6px 10px', borderRadius: 6, border: 'none', cursor: req.assignedVehicle ? 'default' : 'pointer', background: req.assignedVehicle ? '#9e9e9e' : '#1e88e5', color: '#fff' }}\r\n                  >\r\n                    {req.assignedVehicle ? 'Assigned' : 'Assign'}\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}