{"ast":null,"code":"var _jsxFileName = \"C:\\\\emer_responce\\\\emer_responce\\\\src\\\\pages\\\\DriverPortal.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { onAuthStateChanged, signOut } from 'firebase/auth';\nimport { useNavigate } from 'react-router-dom';\nimport { auth, db } from '../firebase';\nimport { collection, query, where, onSnapshot, doc, updateDoc } from 'firebase/firestore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function DriverPortal() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [assignment, setAssignment] = useState(null);\n  const [driver, setDriver] = useState(null);\n  const [driverDocId, setDriverDocId] = useState(null);\n  const [activeTab, setActiveTab] = useState('assignment'); // 'assignment' | 'profile'\n  const [profileForm, setProfileForm] = useState({\n    name: '',\n    phone: '',\n    vehicleType: ''\n  });\n  const [notification, setNotification] = useState(null);\n  const lastAssignedRef = useRef(null);\n  const navigate = useNavigate();\n  const doLogout = async () => {\n    await signOut(auth);\n    navigate('/driver-login');\n  };\n  useEffect(() => {\n    const unsubAuth = onAuthStateChanged(auth, u => setUser(u));\n    return () => unsubAuth();\n  }, []);\n  useEffect(() => {\n    if (!user) return;\n    // Find driver doc by uid or email\n    const q = query(collection(db, 'drivers'), where('email', '==', user.email || ''));\n    const unsub = onSnapshot(q, snap => {\n      const d = snap.docs[0];\n      const data = d === null || d === void 0 ? void 0 : d.data();\n      setDriver(data || null);\n      setDriverDocId((d === null || d === void 0 ? void 0 : d.id) || null);\n      if (!data) {\n        setAssignment(null);\n        return;\n      }\n      setProfileForm({\n        name: data.name || '',\n        phone: data.phone || '',\n        vehicleType: data.vehicleType || ''\n      });\n      // Watch the request assigned to this driver via assignedVehicle\n      const rq = query(collection(db, 'emergencyRequests'), where('assignedVehicle', '==', data.assignedVehicle || '__none__'));\n      const unsubReq = onSnapshot(rq, rs => {\n        const next = rs.docs[0] ? {\n          id: rs.docs[0].id,\n          ...rs.docs[0].data()\n        } : null;\n        // Show notification on new assignment\n        if (next !== null && next !== void 0 && next.assignedVehicle && lastAssignedRef.current !== next.assignedVehicle) {\n          setNotification({\n            title: 'New Assignment',\n            message: `Vehicle ${next.assignedVehicle} assigned.`,\n            type: 'info'\n          });\n          lastAssignedRef.current = next.assignedVehicle;\n        }\n        setAssignment(next);\n      });\n      return () => unsubReq();\n    });\n    return () => unsub();\n  }, [user]);\n  const shareLocation = () => {\n    if (!navigator.geolocation || !user) return;\n    navigator.geolocation.getCurrentPosition(async pos => {\n      const {\n        latitude,\n        longitude\n      } = pos.coords;\n      const q = query(collection(db, 'drivers'), where('email', '==', user.email || ''));\n      // Fetch once via onSnapshot callback pattern\n      const unsub = onSnapshot(q, async snap => {\n        const driverDoc = snap.docs[0];\n        if (driverDoc) {\n          await updateDoc(doc(db, 'drivers', driverDoc.id), {\n            location: {\n              latitude,\n              longitude\n            },\n            lastSharedAt: new Date().toISOString()\n          });\n          setNotification({\n            title: 'Location Shared',\n            message: 'Your current location was sent.',\n            type: 'success'\n          });\n        }\n        unsub();\n      });\n    });\n  };\n  const saveProfile = async () => {\n    if (!driverDocId) return;\n    await updateDoc(doc(db, 'drivers', driverDocId), {\n      name: profileForm.name,\n      phone: profileForm.phone,\n      vehicleType: profileForm.vehicleType\n    });\n    setNotification({\n      title: 'Profile Updated',\n      message: 'Your profile was saved.',\n      type: 'success'\n    });\n  };\n  const assignmentOsmEmbedUrl = useMemo(() => {\n    if (!(assignment !== null && assignment !== void 0 && assignment.latitude) || !(assignment !== null && assignment !== void 0 && assignment.longitude)) return null;\n    const lat = assignment.latitude;\n    const lon = assignment.longitude;\n    // Simple destination marker embed\n    return `https://www.openstreetmap.org/export/embed.html?layer=mapnik&marker=${encodeURIComponent(lat)},${encodeURIComponent(lon)}`;\n  }, [assignment]);\n  const osmRouteUrl = useMemo(() => {\n    var _driver$location, _driver$location2;\n    const dLat = driver === null || driver === void 0 ? void 0 : (_driver$location = driver.location) === null || _driver$location === void 0 ? void 0 : _driver$location.latitude;\n    const dLon = driver === null || driver === void 0 ? void 0 : (_driver$location2 = driver.location) === null || _driver$location2 === void 0 ? void 0 : _driver$location2.longitude;\n    const uLat = assignment === null || assignment === void 0 ? void 0 : assignment.latitude;\n    const uLon = assignment === null || assignment === void 0 ? void 0 : assignment.longitude;\n    if (typeof dLat === 'number' && typeof dLon === 'number' && typeof uLat === 'number' && typeof uLon === 'number') {\n      // OSRM car routing on OSM site\n      return `https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=${encodeURIComponent(dLat)},${encodeURIComponent(dLon)};${encodeURIComponent(uLat)},${encodeURIComponent(uLon)}`;\n    }\n    return null;\n  }, [driver, assignment]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n      style: styles.sidebar,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          marginTop: 0\n        },\n        children: \"Driver\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        style: styles.menu,\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            ...styles.menuItem,\n            ...(activeTab === 'assignment' ? styles.menuItemActive : {})\n          },\n          onClick: () => setActiveTab('assignment'),\n          children: \"My Assignment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            ...styles.menuItem,\n            ...(activeTab === 'profile' ? styles.menuItemActive : {})\n          },\n          onClick: () => setActiveTab('profile'),\n          children: \"Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: styles.logout,\n        onClick: doLogout,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      style: styles.main,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          marginTop: 0\n        },\n        children: \"Driver Portal\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this), !user && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Please log in.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 19\n      }, this), user && activeTab === 'assignment' && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.card,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"User:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 16\n          }, this), \" \", user.email]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 13\n        }, this), !assignment ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No vehicle assigned yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gridTemplateColumns: '1fr 1fr',\n            gap: 12\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Assigned Vehicle:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 22\n              }, this), \" \", assignment.assignedVehicle]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Type:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 22\n              }, this), \" \", assignment.assignedVehicleType || '-']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Status:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 22\n              }, this), \" \", assignment.status]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Destination:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 22\n              }, this), \" \", assignment.latitude, \", \", assignment.longitude]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 19\n            }, this), assignmentOsmEmbedUrl && /*#__PURE__*/_jsxDEV(\"iframe\", {\n              title: \"destination\",\n              width: \"100%\",\n              height: \"180\",\n              style: {\n                border: 0\n              },\n              loading: \"lazy\",\n              src: assignmentOsmEmbedUrl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 12\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.button,\n            onClick: shareLocation,\n            children: \"Share Current Location\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 15\n          }, this), osmRouteUrl && /*#__PURE__*/_jsxDEV(\"a\", {\n            href: osmRouteUrl,\n            target: \"_blank\",\n            rel: \"noreferrer\",\n            style: {\n              ...styles.buttonLink,\n              marginLeft: 8\n            },\n            children: \"Navigate with OpenStreetMap\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }, this), user && activeTab === 'profile' && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.card,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            marginTop: 0\n          },\n          children: \"My Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gridTemplateColumns: '1fr 1fr 1fr',\n            gap: 12\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              style: styles.input,\n              value: profileForm.name,\n              onChange: e => setProfileForm({\n                ...profileForm,\n                name: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Phone\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              style: styles.input,\n              value: profileForm.phone,\n              onChange: e => setProfileForm({\n                ...profileForm,\n                phone: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Vehicle Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              style: styles.input,\n              value: profileForm.vehicleType,\n              onChange: e => setProfileForm({\n                ...profileForm,\n                vehicleType: e.target.value\n              }),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"ambulance\",\n                children: \"Ambulance\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"fireengine\",\n                children: \"Fire Engine\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"policevan\",\n                children: \"Police Van\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 12\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.button,\n            onClick: saveProfile,\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }, this), notification && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'fixed',\n          right: 16,\n          bottom: 16,\n          background: '#2d3436',\n          color: '#fff',\n          padding: '10px 12px',\n          borderRadius: 8,\n          boxShadow: '0 6px 20px rgba(0,0,0,0.25)'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontWeight: 'bold'\n          },\n          children: notification.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: notification.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            marginTop: 6,\n            background: '#636e72',\n            color: '#fff',\n            border: 'none',\n            borderRadius: 6,\n            padding: '4px 8px',\n            cursor: 'pointer'\n          },\n          onClick: () => setNotification(null),\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, this);\n}\n_s(DriverPortal, \"P3eD3Y67l+zkJo2xA/ai7MHTAOI=\", false, function () {\n  return [useNavigate];\n});\n_c = DriverPortal;\nconst styles = {\n  container: {\n    display: 'flex',\n    minHeight: '100vh',\n    background: '#f5f6fa'\n  },\n  sidebar: {\n    position: 'fixed',\n    left: 0,\n    top: 0,\n    bottom: 0,\n    width: 220,\n    background: 'linear-gradient(to bottom, #2c3e50, #2f3b4a)',\n    color: '#fff',\n    padding: 16,\n    boxSizing: 'border-box'\n  },\n  main: {\n    marginLeft: 220,\n    padding: 20,\n    width: '100%',\n    boxSizing: 'border-box'\n  },\n  menu: {\n    listStyle: 'none',\n    padding: 0,\n    margin: 0\n  },\n  menuItem: {\n    padding: '8px 0',\n    opacity: 0.9,\n    cursor: 'pointer'\n  },\n  menuItemActive: {\n    fontWeight: 'bold',\n    opacity: 1\n  },\n  card: {\n    background: '#fff',\n    border: '1px solid #eaeaea',\n    borderRadius: 10,\n    padding: 16,\n    boxShadow: '0 4px 10px rgba(0,0,0,0.05)'\n  },\n  button: {\n    padding: '10px 12px',\n    borderRadius: 8,\n    border: 'none',\n    background: '#1f7a8c',\n    color: '#fff',\n    cursor: 'pointer',\n    fontWeight: 'bold'\n  },\n  buttonLink: {\n    display: 'inline-block',\n    padding: '10px 12px',\n    borderRadius: 8,\n    background: '#2a9d8f',\n    color: '#fff',\n    textDecoration: 'none',\n    fontWeight: 'bold'\n  },\n  input: {\n    width: '100%',\n    padding: '10px 12px',\n    borderRadius: 8,\n    border: '1px solid #dcdde1'\n  },\n  logout: {\n    marginTop: 'auto',\n    width: '100%',\n    padding: '10px 12px',\n    borderRadius: 8,\n    border: 'none',\n    background: '#e63946',\n    color: '#fff',\n    cursor: 'pointer',\n    fontWeight: 'bold'\n  }\n};\nvar _c;\n$RefreshReg$(_c, \"DriverPortal\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","onAuthStateChanged","signOut","useNavigate","auth","db","collection","query","where","onSnapshot","doc","updateDoc","jsxDEV","_jsxDEV","DriverPortal","_s","user","setUser","assignment","setAssignment","driver","setDriver","driverDocId","setDriverDocId","activeTab","setActiveTab","profileForm","setProfileForm","name","phone","vehicleType","notification","setNotification","lastAssignedRef","navigate","doLogout","unsubAuth","u","q","email","unsub","snap","d","docs","data","id","rq","assignedVehicle","unsubReq","rs","next","current","title","message","type","shareLocation","navigator","geolocation","getCurrentPosition","pos","latitude","longitude","coords","driverDoc","location","lastSharedAt","Date","toISOString","saveProfile","assignmentOsmEmbedUrl","lat","lon","encodeURIComponent","osmRouteUrl","_driver$location","_driver$location2","dLat","dLon","uLat","uLon","style","styles","container","children","sidebar","marginTop","fileName","_jsxFileName","lineNumber","columnNumber","menu","menuItem","menuItemActive","onClick","logout","main","card","display","gridTemplateColumns","gap","assignedVehicleType","status","width","height","border","loading","src","button","href","target","rel","buttonLink","marginLeft","input","value","onChange","e","position","right","bottom","background","color","padding","borderRadius","boxShadow","fontWeight","cursor","_c","minHeight","left","top","boxSizing","listStyle","margin","opacity","textDecoration","$RefreshReg$"],"sources":["C:/emer_responce/emer_responce/src/pages/DriverPortal.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { onAuthStateChanged, signOut } from 'firebase/auth';\nimport { useNavigate } from 'react-router-dom';\nimport { auth, db } from '../firebase';\nimport { collection, query, where, onSnapshot, doc, updateDoc } from 'firebase/firestore';\n\nexport default function DriverPortal() {\n  const [user, setUser] = useState(null);\n  const [assignment, setAssignment] = useState(null);\n  const [driver, setDriver] = useState(null);\n  const [driverDocId, setDriverDocId] = useState(null);\n  const [activeTab, setActiveTab] = useState('assignment'); // 'assignment' | 'profile'\n  const [profileForm, setProfileForm] = useState({ name: '', phone: '', vehicleType: '' });\n  const [notification, setNotification] = useState(null);\n  const lastAssignedRef = useRef(null);\n  const navigate = useNavigate();\n\n  const doLogout = async () => {\n    await signOut(auth);\n    navigate('/driver-login');\n  };\n\n  useEffect(() => {\n    const unsubAuth = onAuthStateChanged(auth, (u) => setUser(u));\n    return () => unsubAuth();\n  }, []);\n\n  useEffect(() => {\n    if (!user) return;\n    // Find driver doc by uid or email\n    const q = query(collection(db, 'drivers'), where('email', '==', user.email || ''));\n    const unsub = onSnapshot(q, (snap) => {\n      const d = snap.docs[0];\n      const data = d?.data();\n      setDriver(data || null);\n      setDriverDocId(d?.id || null);\n      if (!data) { setAssignment(null); return; }\n      setProfileForm({\n        name: data.name || '',\n        phone: data.phone || '',\n        vehicleType: data.vehicleType || '',\n      });\n      // Watch the request assigned to this driver via assignedVehicle\n      const rq = query(\n        collection(db, 'emergencyRequests'),\n        where('assignedVehicle', '==', data.assignedVehicle || '__none__')\n      );\n      const unsubReq = onSnapshot(rq, (rs) => {\n        const next = rs.docs[0] ? { id: rs.docs[0].id, ...rs.docs[0].data() } : null;\n        // Show notification on new assignment\n        if (next?.assignedVehicle && lastAssignedRef.current !== next.assignedVehicle) {\n          setNotification({\n            title: 'New Assignment',\n            message: `Vehicle ${next.assignedVehicle} assigned.`,\n            type: 'info'\n          });\n          lastAssignedRef.current = next.assignedVehicle;\n        }\n        setAssignment(next);\n      });\n      return () => unsubReq();\n    });\n    return () => unsub();\n  }, [user]);\n\n  const shareLocation = () => {\n    if (!navigator.geolocation || !user) return;\n    navigator.geolocation.getCurrentPosition(async (pos) => {\n      const { latitude, longitude } = pos.coords;\n      const q = query(collection(db, 'drivers'), where('email', '==', user.email || ''));\n      // Fetch once via onSnapshot callback pattern\n      const unsub = onSnapshot(q, async (snap) => {\n        const driverDoc = snap.docs[0];\n        if (driverDoc) {\n          await updateDoc(doc(db, 'drivers', driverDoc.id), {\n            location: { latitude, longitude },\n            lastSharedAt: new Date().toISOString(),\n          });\n          setNotification({ title: 'Location Shared', message: 'Your current location was sent.', type: 'success' });\n        }\n        unsub();\n      });\n    });\n  };\n\n  const saveProfile = async () => {\n    if (!driverDocId) return;\n    await updateDoc(doc(db, 'drivers', driverDocId), {\n      name: profileForm.name,\n      phone: profileForm.phone,\n      vehicleType: profileForm.vehicleType,\n    });\n    setNotification({ title: 'Profile Updated', message: 'Your profile was saved.', type: 'success' });\n  };\n\n  const assignmentOsmEmbedUrl = useMemo(() => {\n    if (!assignment?.latitude || !assignment?.longitude) return null;\n    const lat = assignment.latitude;\n    const lon = assignment.longitude;\n    // Simple destination marker embed\n    return `https://www.openstreetmap.org/export/embed.html?layer=mapnik&marker=${encodeURIComponent(lat)},${encodeURIComponent(lon)}`;\n  }, [assignment]);\n\n  const osmRouteUrl = useMemo(() => {\n    const dLat = driver?.location?.latitude;\n    const dLon = driver?.location?.longitude;\n    const uLat = assignment?.latitude;\n    const uLon = assignment?.longitude;\n    if (typeof dLat === 'number' && typeof dLon === 'number' && typeof uLat === 'number' && typeof uLon === 'number') {\n      // OSRM car routing on OSM site\n      return `https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=${encodeURIComponent(dLat)},${encodeURIComponent(dLon)};${encodeURIComponent(uLat)},${encodeURIComponent(uLon)}`;\n    }\n    return null;\n  }, [driver, assignment]);\n\n  return (\n    <div style={styles.container}>\n      <aside style={styles.sidebar}>\n        <h3 style={{ marginTop: 0 }}>Driver</h3>\n        <ul style={styles.menu}>\n          <li style={{ ...styles.menuItem, ...(activeTab === 'assignment' ? styles.menuItemActive : {}) }} onClick={() => setActiveTab('assignment')}>My Assignment</li>\n          <li style={{ ...styles.menuItem, ...(activeTab === 'profile' ? styles.menuItemActive : {}) }} onClick={() => setActiveTab('profile')}>Profile</li>\n        </ul>\n        <button style={styles.logout} onClick={doLogout}>Logout</button>\n      </aside>\n      <main style={styles.main}>\n        <h2 style={{ marginTop: 0 }}>Driver Portal</h2>\n        {!user && <p>Please log in.</p>}\n        {user && activeTab === 'assignment' && (\n          <div style={styles.card}>\n            <p><strong>User:</strong> {user.email}</p>\n            {!assignment ? (\n              <p>No vehicle assigned yet.</p>\n            ) : (\n              <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 12 }}>\n                <div>\n                  <p><strong>Assigned Vehicle:</strong> {assignment.assignedVehicle}</p>\n                  <p><strong>Type:</strong> {assignment.assignedVehicleType || '-'}</p>\n                  <p><strong>Status:</strong> {assignment.status}</p>\n                </div>\n                <div>\n                  <p><strong>Destination:</strong> {assignment.latitude}, {assignment.longitude}</p>\n                  {assignmentOsmEmbedUrl && (\n                    <iframe title=\"destination\" width=\"100%\" height=\"180\" style={{ border: 0 }} loading=\"lazy\" src={assignmentOsmEmbedUrl}></iframe>\n                  )}\n                </div>\n              </div>\n            )}\n            <div style={{ marginTop: 12 }}>\n              <button style={styles.button} onClick={shareLocation}>Share Current Location</button>\n              {osmRouteUrl && (\n                <a href={osmRouteUrl} target=\"_blank\" rel=\"noreferrer\" style={{ ...styles.buttonLink, marginLeft: 8 }}>Navigate with OpenStreetMap</a>\n              )}\n            </div>\n          </div>\n        )}\n        {user && activeTab === 'profile' && (\n          <div style={styles.card}>\n            <h3 style={{ marginTop: 0 }}>My Profile</h3>\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: 12 }}>\n              <div>\n                <label>Name</label>\n                <input style={styles.input} value={profileForm.name} onChange={(e) => setProfileForm({ ...profileForm, name: e.target.value })} />\n              </div>\n              <div>\n                <label>Phone</label>\n                <input style={styles.input} value={profileForm.phone} onChange={(e) => setProfileForm({ ...profileForm, phone: e.target.value })} />\n              </div>\n              <div>\n                <label>Vehicle Type</label>\n                <select style={styles.input} value={profileForm.vehicleType} onChange={(e) => setProfileForm({ ...profileForm, vehicleType: e.target.value })}>\n                  <option value=\"ambulance\">Ambulance</option>\n                  <option value=\"fireengine\">Fire Engine</option>\n                  <option value=\"policevan\">Police Van</option>\n                </select>\n              </div>\n            </div>\n            <div style={{ marginTop: 12 }}>\n              <button style={styles.button} onClick={saveProfile}>Save</button>\n            </div>\n          </div>\n        )}\n        {notification && (\n          <div style={{ position: 'fixed', right: 16, bottom: 16, background: '#2d3436', color: '#fff', padding: '10px 12px', borderRadius: 8, boxShadow: '0 6px 20px rgba(0,0,0,0.25)' }}>\n            <div style={{ fontWeight: 'bold' }}>{notification.title}</div>\n            <div>{notification.message}</div>\n            <button style={{ marginTop: 6, background: '#636e72', color: '#fff', border: 'none', borderRadius: 6, padding: '4px 8px', cursor: 'pointer' }} onClick={() => setNotification(null)}>Close</button>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n\nconst styles = {\n  container: { display: 'flex', minHeight: '100vh', background: '#f5f6fa' },\n  sidebar: {\n    position: 'fixed', left: 0, top: 0, bottom: 0, width: 220,\n    background: 'linear-gradient(to bottom, #2c3e50, #2f3b4a)', color: '#fff',\n    padding: 16, boxSizing: 'border-box'\n  },\n  main: { marginLeft: 220, padding: 20, width: '100%', boxSizing: 'border-box' },\n  menu: { listStyle: 'none', padding: 0, margin: 0 },\n  menuItem: { padding: '8px 0', opacity: 0.9, cursor: 'pointer' },\n  menuItemActive: { fontWeight: 'bold', opacity: 1 },\n  card: {\n    background: '#fff', border: '1px solid #eaeaea', borderRadius: 10,\n    padding: 16, boxShadow: '0 4px 10px rgba(0,0,0,0.05)'\n  },\n  button: {\n    padding: '10px 12px', borderRadius: 8, border: 'none', background: '#1f7a8c',\n    color: '#fff', cursor: 'pointer', fontWeight: 'bold'\n  },\n  buttonLink: {\n    display: 'inline-block',\n    padding: '10px 12px',\n    borderRadius: 8,\n    background: '#2a9d8f',\n    color: '#fff',\n    textDecoration: 'none',\n    fontWeight: 'bold'\n  },\n  input: {\n    width: '100%',\n    padding: '10px 12px',\n    borderRadius: 8,\n    border: '1px solid #dcdde1'\n  },\n  logout: {\n    marginTop: 'auto',\n    width: '100%',\n    padding: '10px 12px',\n    borderRadius: 8,\n    border: 'none',\n    background: '#e63946',\n    color: '#fff',\n    cursor: 'pointer',\n    fontWeight: 'bold'\n  }\n};\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}