{"ast":null,"code":"// src/firebase.js\nimport { initializeApp, getApps } from \"firebase/app\";\nimport { getAuth, onAuthStateChanged, signInAnonymously, signOut, createUserWithEmailAndPassword } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getAnalytics, isSupported } from \"firebase/analytics\";\n\n// Your Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBY5-qkTZa84Xg4_kQNLWMdCriql5rtPo8\",\n  authDomain: \"emergency-6fef1.firebaseapp.com\",\n  projectId: \"emergency-6fef1\",\n  storageBucket: \"emergency-6fef1.appspot.com\",\n  messagingSenderId: \"706251688953\",\n  appId: \"1:706251688953:web:5aaff2f24b18d379b88b28\",\n  measurementId: \"G-7B4EBSRCHV\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\n\n// Auth\nexport const auth = getAuth(app);\n\n// Firestore\nexport const db = getFirestore(app);\n\n// Analytics (optional)\nexport let analytics = null;\nisSupported().then(yes => {\n  if (yes) analytics = getAnalytics(app);\n});\n\n// Ensure there is an authenticated user for Firestore security rules that require auth\n// Attempts anonymous sign-in ASAP and exposes a promise to await readiness\nexport const authReady = new Promise(resolve => {\n  let resolved = false;\n  onAuthStateChanged(auth, user => {\n    if (!user) {\n      signInAnonymously(auth).catch(() => {\n        // Swallow to avoid noisy logs; Firestore reads will still fail if rules disallow\n      });\n    }\n    if (!resolved) {\n      resolved = true;\n      resolve();\n    }\n  });\n});\n\n// Create Firebase Auth user for drivers using a secondary app so admin stays logged in\nlet secondaryApp = null;\nexport const createDriverAccount = async (email, password) => {\n  if (!secondaryApp) {\n    secondaryApp = initializeApp(firebaseConfig, 'secondary');\n  }\n  const secondaryAuth = getAuth(secondaryApp);\n  const cred = await createUserWithEmailAndPassword(secondaryAuth, email, password);\n  await signOut(secondaryAuth);\n  return cred.user.uid;\n};","map":{"version":3,"names":["initializeApp","getApps","getAuth","onAuthStateChanged","signInAnonymously","signOut","createUserWithEmailAndPassword","getFirestore","getAnalytics","isSupported","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","auth","db","analytics","then","yes","authReady","Promise","resolve","resolved","user","catch","secondaryApp","createDriverAccount","email","password","secondaryAuth","cred","uid"],"sources":["C:/emer_responce/emer_responce/src/firebase.js"],"sourcesContent":["// src/firebase.js\nimport { initializeApp, getApps } from \"firebase/app\";\nimport { getAuth, onAuthStateChanged, signInAnonymously, signOut, createUserWithEmailAndPassword } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getAnalytics, isSupported } from \"firebase/analytics\";\n\n// Your Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBY5-qkTZa84Xg4_kQNLWMdCriql5rtPo8\",\n  authDomain: \"emergency-6fef1.firebaseapp.com\",\n  projectId: \"emergency-6fef1\",\n  storageBucket: \"emergency-6fef1.appspot.com\",\n  messagingSenderId: \"706251688953\",\n  appId: \"1:706251688953:web:5aaff2f24b18d379b88b28\",\n  measurementId: \"G-7B4EBSRCHV\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\n\n// Auth\nexport const auth = getAuth(app);\n\n// Firestore\nexport const db = getFirestore(app);\n\n// Analytics (optional)\nexport let analytics = null;\nisSupported().then((yes) => {\n  if (yes) analytics = getAnalytics(app);\n});\n\n// Ensure there is an authenticated user for Firestore security rules that require auth\n// Attempts anonymous sign-in ASAP and exposes a promise to await readiness\nexport const authReady = new Promise((resolve) => {\n  let resolved = false;\n  onAuthStateChanged(auth, (user) => {\n    if (!user) {\n      signInAnonymously(auth).catch(() => {\n        // Swallow to avoid noisy logs; Firestore reads will still fail if rules disallow\n      });\n    }\n    if (!resolved) {\n      resolved = true;\n      resolve();\n    }\n  });\n});\n\n// Create Firebase Auth user for drivers using a secondary app so admin stays logged in\nlet secondaryApp = null;\nexport const createDriverAccount = async (email, password) => {\n  if (!secondaryApp) {\n    secondaryApp = initializeApp(firebaseConfig, 'secondary');\n  }\n  const secondaryAuth = getAuth(secondaryApp);\n  const cred = await createUserWithEmailAndPassword(secondaryAuth, email, password);\n  await signOut(secondaryAuth);\n  return cred.user.uid;\n};\n"],"mappings":"AAAA;AACA,SAASA,aAAa,EAAEC,OAAO,QAAQ,cAAc;AACrD,SAASC,OAAO,EAAEC,kBAAkB,EAAEC,iBAAiB,EAAEC,OAAO,EAAEC,8BAA8B,QAAQ,eAAe;AACvH,SAASC,YAAY,QAAQ,oBAAoB;AACjD,SAASC,YAAY,EAAEC,WAAW,QAAQ,oBAAoB;;AAE9D;AACA,MAAMC,cAAc,GAAG;EACrBC,MAAM,EAAE,yCAAyC;EACjDC,UAAU,EAAE,iCAAiC;EAC7CC,SAAS,EAAE,iBAAiB;EAC5BC,aAAa,EAAE,6BAA6B;EAC5CC,iBAAiB,EAAE,cAAc;EACjCC,KAAK,EAAE,2CAA2C;EAClDC,aAAa,EAAE;AACjB,CAAC;;AAED;AACA,MAAMC,GAAG,GAAGlB,aAAa,CAACU,cAAc,CAAC;;AAEzC;AACA,OAAO,MAAMS,IAAI,GAAGjB,OAAO,CAACgB,GAAG,CAAC;;AAEhC;AACA,OAAO,MAAME,EAAE,GAAGb,YAAY,CAACW,GAAG,CAAC;;AAEnC;AACA,OAAO,IAAIG,SAAS,GAAG,IAAI;AAC3BZ,WAAW,CAAC,CAAC,CAACa,IAAI,CAAEC,GAAG,IAAK;EAC1B,IAAIA,GAAG,EAAEF,SAAS,GAAGb,YAAY,CAACU,GAAG,CAAC;AACxC,CAAC,CAAC;;AAEF;AACA;AACA,OAAO,MAAMM,SAAS,GAAG,IAAIC,OAAO,CAAEC,OAAO,IAAK;EAChD,IAAIC,QAAQ,GAAG,KAAK;EACpBxB,kBAAkB,CAACgB,IAAI,EAAGS,IAAI,IAAK;IACjC,IAAI,CAACA,IAAI,EAAE;MACTxB,iBAAiB,CAACe,IAAI,CAAC,CAACU,KAAK,CAAC,MAAM;QAClC;MAAA,CACD,CAAC;IACJ;IACA,IAAI,CAACF,QAAQ,EAAE;MACbA,QAAQ,GAAG,IAAI;MACfD,OAAO,CAAC,CAAC;IACX;EACF,CAAC,CAAC;AACJ,CAAC,CAAC;;AAEF;AACA,IAAII,YAAY,GAAG,IAAI;AACvB,OAAO,MAAMC,mBAAmB,GAAG,MAAAA,CAAOC,KAAK,EAAEC,QAAQ,KAAK;EAC5D,IAAI,CAACH,YAAY,EAAE;IACjBA,YAAY,GAAG9B,aAAa,CAACU,cAAc,EAAE,WAAW,CAAC;EAC3D;EACA,MAAMwB,aAAa,GAAGhC,OAAO,CAAC4B,YAAY,CAAC;EAC3C,MAAMK,IAAI,GAAG,MAAM7B,8BAA8B,CAAC4B,aAAa,EAAEF,KAAK,EAAEC,QAAQ,CAAC;EACjF,MAAM5B,OAAO,CAAC6B,aAAa,CAAC;EAC5B,OAAOC,IAAI,CAACP,IAAI,CAACQ,GAAG;AACtB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}